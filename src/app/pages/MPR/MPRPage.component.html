<div *ngIf="showPage">
  <form [formGroup]="MPRPageForm1">
    <div id="MPRPageForm1" class="my-animation">
      <div class="head-text pl-0">
        <div class="col-md-4 pt-2">
          Material Purchase Requisition : <span *ngIf="mprRevisionModel.MPRDetail.DocumentNo" style="color:#dc3545;">{{mprRevisionModel.MPRDetail.DocumentNo}}</span>
        </div>
        <div class="col-md-3 pt-2">
          Current Status: <span *ngIf="mprRevisionModel.StatusId" style="color:#dc3545;">{{currentStatus}}</span>
        </div>
        <div class="col-md-3 pt-2">
          <span *ngIf="mprRevisionList.length > 0" class="form-inline ml-2">
            Revision No:<span *ngFor="let revision of mprRevisionList">
              &nbsp;&nbsp;
              <a href='#/' [ngClass]="{'active': revision.RevisionId == mprRevisionModel.RevisionId}" [routerLink]="['/SCM/MPRForm',revision.RevisionId]">{{revision.RevisionNo}}</a>
            </span>
          </span>
        </div>
        <div *ngIf="form1Edit" class="col-md-2 edit pt-1">
          <button type="button" *ngIf="!showForm1EditBtn" class="btn btn-outline-secondary form-inline edit-button" pButton icon="fa fa-edit" aria-hidden="true" (click)="onFormEdit('form1Edit','MPRPageForm1')"></button>
        </div>
      </div>
      <div class="form-control" style="height:100%;border-radius:0px;">
        <div class="row " style="margin-top:10px">
          <div *ngIf="!form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label for="docNo" class="form-label">Document Number</label>
            <input class="form-control" type="text" formControlName="docNo" readonly [(ngModel)]="mprRevisionModel.MPRDetail.DocumentNo">
          </div>
          <div *ngIf="form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label class="form-label lblEdit">Document Number  </label>
            <span class="valueEdit">{{mprRevisionModel.MPRDetail.DocumentNo}}</span>
          </div>
          <div *ngIf="!form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label for="SaleOrderNo" class="form-label">Document Description</label>&nbsp;<span style="color:red">*</span>
            <textarea class="form-control" formControlName="DocumentDescription" maxlength="200" [(ngModel)]="mprRevisionModel.MPRDetail.DocumentDescription" [ngClass]="{ 'is-invalid': MPRForm1Submitted &&  MPRPageForm1.controls.DocumentDescription.errors }"></textarea>
            <span *ngIf="MPRForm1Submitted && MPRPageForm1.controls.DocumentDescription.errors" class="invalid-feedback">Document Description Required.</span>
          </div>
          <div *ngIf="form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label class="form-label lblEdit">Document Description  </label>
            <span class="valueEdit">{{mprRevisionModel.MPRDetail.DocumentDescription}}</span>
          </div>
          <div *ngIf="!form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label for="purposeIssuingMpr" class="form-label">Purpose Issuing MPR</label>&nbsp;<span style="color:red">*</span>
            <div class="form-control" style="height:70%" [ngClass]="{ 'is-invalid': MPRForm1Submitted &&  MPRPageForm1.controls.IssuePurposeId.errors }">
              <p-radioButton class="form-inline" name="group1" value="1" label="For Enquiry" [(ngModel)]="mprRevisionModel.IssuePurposeId" formControlName="IssuePurposeId" inputId="opt1"></p-radioButton>
              <p-radioButton class="form-inline" name="group1" value="2" label="For Issuing PO" [(ngModel)]="mprRevisionModel.IssuePurposeId" formControlName="IssuePurposeId" inputId="opt2"></p-radioButton>
            </div>
            <span *ngIf="MPRForm1Submitted && MPRPageForm1.controls.IssuePurposeId.errors" class="invalid-feedback">Purpose Issuing MPR Required</span>
          </div>
          <div *ngIf="form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label class="form-label lblEdit">Purpose Issuing MPR  </label>
            <span class="valueEdit">{{mprRevisionModel.IssuePurposeId==1?'For Enquiry':'For Issuing PO'}}</span>
          </div>
        </div>
        <div class="row">
          <div *ngIf="!form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label for="DepartmentId" class="form-label">Department</label>&nbsp;<span style="color:red">*</span>
            <div class="form-inline-list">
              <input type="text" class="form-control forms-input  " formControlName="DepartmentId" (keypress)="onsrchTxtChange('DepartmentId','mprRevisionModel')" [value]="MPRPageForm1.controls.DepartmentId.value" [ngClass]="{ 'is-invalid': MPRForm1Submitted &&  MPRForm1Submitted && (MPRPageForm1.controls.DepartmentId.value.trim()=='' || !mprRevisionModel.DepartmentId)}">
              <span class="input-group-append">
                <button type="button" class="btn btn-outline-secondary form-control btn-border" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm1','DepartmentId',MPRPageForm1.controls.DepartmentId.value,undefined)"></button>
              </span>
              <span *ngIf="MPRForm1Submitted && (MPRPageForm1.controls.DepartmentId.value.trim()=='' || !mprRevisionModel.DepartmentId)" class="invalid-feedback">Select Department.</span>
            </div>
          </div>
          <div *ngIf="form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label class="lblEdit">Department  </label>
            <span class="valueEdit">{{MPRPageForm1.value.DepartmentId}}</span>
          </div>
          <div *ngIf="!form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label for="ProjectManager" class="form-label">Project Manager</label>&nbsp;<span style="color:red">*</span>
            <div class="form-inline-list ml-2 ">
              <input type="text" class="form-control forms-input" formControlName="ProjectManager" (keypress)="onsrchTxtChange('ProjectManager','mprRevisionModel')" [value]="MPRPageForm1.controls.ProjectManager.value" [ngClass]="{ 'is-invalid': MPRForm1Submitted &&  MPRForm1Submitted && (MPRPageForm1.controls.ProjectManager.value.trim()=='' || !mprRevisionModel.ProjectManager)}">
              <div class="input-group-append">
                <button type="button" class="btn btn-outline-secondary form-control btn-border" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm1','ProjectManager',MPRPageForm1.controls.ProjectManager.value,undefined)"></button>
              </div>
              <span *ngIf="MPRForm1Submitted && (MPRPageForm1.controls.ProjectManager.value.trim()=='' || !mprRevisionModel.ProjectManager)" class="invalid-feedback">Select Project Manager.</span>
            </div>
          </div>
          <div *ngIf="form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label class="lblEdit">Project Manager  </label>
            <span class="valueEdit">{{MPRPageForm1.value.ProjectManager}}</span>

          </div>
          <div *ngIf="!form1Edit" class="col-lg-4 col-md-4 col-sm-4">
            <label for="SaleOrderNo" class="form-label">Sale Order No</label>
            <div class="form-inline-list ml-2">
              <input type="text" class="form-control" id="SaleOrderNo" maxlength="100" formControlName="SaleOrderNo" [(ngModel)]="mprRevisionModel.SaleOrderNo" [ngClass]="{ 'is-invalid': MPRForm1Submitted &&  MPRPageForm1.controls.SaleOrderNo.errors }">
              <div class="input-group-append">
                <button class="btn btn-primary btn-xs" type="button">
                  <i class="fa fa-search" (click)="loadjobcodes(MPRPageForm1.controls.SaleOrderNo.value,'MPRPageForm1')"></i>
                </button>
              </div>
              <span *ngIf="MPRForm1Submitted && MPRPageForm1.controls.SaleOrderNo.errors" class="invalid-feedback">Sale OrderNo Required.</span>
            </div>
            <!--<span class="glyphicon glyphicon-search form-control-feedback"></span>-->

          </div>
          <!--<div class="col-lg-4 col-md-4 col-sm-4 input-group form-group">
      <input type="text" class="form-control form-inline  ml-2" placeholder="Search this blog">
        <button class="btn btn-secondary" type="button">
          <i class="fa fa-search"></i>
        </button>
    </div>-->
          <div *ngIf="form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label class="lblEdit">Sale Order No</label>
            <span class="valueEdit">{{mprRevisionModel.SaleOrderNo}}</span>
          </div>
        </div>
        <div class="row">
          <div *ngIf="!form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label for="JobCode" class="form-label">Job Code</label>
            <input *ngIf="!form1Edit" class="form-control" type="text" maxlength="50" id="JobCode" formControlName="JobCode" [(ngModel)]="mprRevisionModel.JobCode" [ngClass]="{ 'is-invalid': MPRForm1Submitted &&  MPRPageForm1.controls.JobCode.errors }">
            <span *ngIf="MPRForm1Submitted && MPRPageForm1.controls.JobCode.errors" class="invalid-feedback">Job Code Required.</span>
          </div>
          <!--<div *ngIf="!form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
      <label for="JobCode" class="form-label">Job Code</label>
      <input *ngIf="!form1Edit" class="form-control" type="text" maxlength="50" id="JobCode" formControlName="JobCode" [(ngModel)]="jobcodes.ProjectDefinition" [ngClass]="{ 'is-invalid': MPRForm1Submitted &&  MPRPageForm1.controls.JobCode.errors }">
      <span *ngIf="MPRForm1Submitted && MPRPageForm1.controls.JobCode.errors" class="invalid-feedback">Job Code Required.</span>
    </div>-->
          <div *ngIf="form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label class="lblEdit">Job Code </label>
            <span class="valueEdit">{{mprRevisionModel.JobCode}}</span>
          </div>
          <div *ngIf="!form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label for="JobName" class="form-label">Job Name</label>
            <input type="text" id="JobName" formControlName="JobName" maxlength="100" [(ngModel)]="mprRevisionModel.JobName" class="form-control" [ngClass]="{ 'is-invalid': MPRForm1Submitted &&  MPRPageForm1.controls.JobName.errors }">
            <span *ngIf="MPRForm1Submitted && MPRPageForm1.controls.JobName.errors" class="invalid-feedback">Job Name Required.</span>
          </div>
          <!--<div *ngIf="!form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
      <label for="JobName" class="form-label">Job Name</label>
      <input type="text" id="JobName" formControlName="JobName" maxlength="100" [(ngModel)]="jobcodes.ProjectText" class="form-control" [ngClass]="{ 'is-invalid': MPRForm1Submitted &&  MPRPageForm1.controls.JobName.errors }">
      <span *ngIf="MPRForm1Submitted && MPRPageForm1.controls.JobName.errors" class="invalid-feedback">Job Name Required.</span>
    </div>-->
          <div *ngIf="form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label class="lblEdit">Job Name </label>
            <span class="valueEdit">{{mprRevisionModel.JobName}}</span>
          </div>
          <div *ngIf="!form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label for="GEPSApprovalId" class="form-label">Ge Ps Approval Id</label>
            <input type="text" id="GEPSApprovalId" formControlName="GEPSApprovalId" maxlength="7" [(ngModel)]="mprRevisionModel.GEPSApprovalId" class="form-control" [ngClass]="{ 'is-invalid': MPRForm1Submitted &&  MPRPageForm1.controls.GEPSApprovalId.errors }">
            <div *ngIf="MPRForm1Submitted && MPRPageForm1.controls.GEPSApprovalId.errors" class="invalid-feedback">Ge Ps Approval Id Required.</div>
          </div>
          <div *ngIf="form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label class="lblEdit">Ge Ps Approval Id</label>
            <span class="valueEdit">{{mprRevisionModel.GEPSApprovalId}}</span>
          </div>
        </div>
        <div class="row">
          <div *ngIf="!form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label for="ClientName" class="form-label">Sold To Party/Contract Company</label>&nbsp;
            <div class="form-inline-list  ml-2 ">
              <input type="text" class="form-control forms-input" formControlName="soldtoparty" [value]="MPRPageForm1.controls.soldtoparty.value">
              <div class="input-group-append">
                <button type="button" class="btn btn-outline-secondary form-control btn-border" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm1','soldtoparty',MPRPageForm1.controls.soldtoparty.value,undefined)"></button>
              </div>
              <!--<span *ngIf="MPRForm1Submitted && (MPRPageForm1.controls.soldtoparty.value.trim()=='' || !mprRevisionModel.soldtoparty)" class="invalid-feedback">Select Client Name.</span>-->
            </div>

          </div>
          <div *ngIf="form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label class="lblEdit">Soldtoparty/Contract Company</label>
            <span class="valueEdit">{{mprRevisionModel.soldtopartyname}}</span>
          </div>
          <div *ngIf="!form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label for="ClientName" class="form-label">End User Name</label>&nbsp;
            <div class="form-inline-list  ml-2 ">
              <input type="text" class="form-control forms-input" formControlName="Enduser" [value]="MPRPageForm1.controls.Enduser.value">
              <div class="input-group-append">
                <button type="button" class="btn btn-outline-secondary form-control btn-border" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm1','Enduser',MPRPageForm1.controls.Enduser.value,undefined)"></button>
              </div>
              <!--<span *ngIf="MPRForm1Submitted && (MPRPageForm1.controls.Enduser.value.trim()=='' || !mprRevisionModel.Endusername)" class="invalid-feedback">Select Client Name.</span>-->
            </div>
          </div>
          <div *ngIf="form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label class="lblEdit">End user name</label>
            <span class="valueEdit">{{mprRevisionModel.Endusername}}</span>
          </div>
        </div>

        <div class="row">
          <div *ngIf="!form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label for="ClientName" class="form-label">Name of the Client</label>&nbsp;
            <div class="form-inline-list  ml-2 ">
              <input type="text" class="form-control forms-input" formControlName="ClientName" (keypress)="onsrchTxtChange('ClientName','mprRevisionModel')" [value]="MPRPageForm1.controls.ClientName.value" [ngClass]="{ 'is-invalid': MPRForm1Submitted &&  MPRPageForm1.controls.ClientName.errors}">
              <div class="input-group-append">
                <button type="button" class="btn btn-outline-secondary form-control btn-border" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm1','ClientName',MPRPageForm1.controls.ClientName.value,undefined)"></button>
              </div>
              <!--<span *ngIf="MPRForm1Submitted && (MPRPageForm1.controls.ClientName.value.trim()=='' || !mprRevisionModel.ClientName)" class="invalid-feedback">Select Client Name.</span>-->
            </div>
          </div>
          <div *ngIf="form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label class="lblEdit">Name of the Client </label>
            <span class="valueEdit">{{MPRPageForm1.value.ClientName}}</span>
          </div>
          <div *ngIf="!form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label for="PlantLocation" class="form-label">Plant Location</label>
            <input type="text" id="PlantLocation" formControlName="PlantLocation" maxlength="100" [(ngModel)]="mprRevisionModel.PlantLocation" class="form-control" [ngClass]="{ 'is-invalid': MPRForm1Submitted &&  MPRPageForm1.controls.PlantLocation.errors }">
            <span *ngIf="MPRForm1Submitted && MPRPageForm1.controls.PlantLocation.errors" class="invalid-feedback">Plant Location Required.</span>
          </div>
          <div *ngIf="form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label class="lblEdit">Plant Location </label>
            <span class="valueEdit">{{mprRevisionModel.PlantLocation}}</span>
          </div>
          <div *ngIf="!form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label for="BuyerGroupId" class="form-label">Buyer of Group</label>&nbsp;<span style="color:red">*</span>
            <div class="form-inline-list  ml-2 ">
              <input type="text" class="form-control forms-input" formControlName="BuyerGroupId" (keypress)="onsrchTxtChange('BuyerGroupId','mprRevisionModel')" [value]="MPRPageForm1.controls.BuyerGroupId.value" [ngClass]="{ 'is-invalid': MPRForm1Submitted &&  MPRForm1Submitted && (MPRPageForm1.controls.BuyerGroupId.value.trim()=='' ||  !mprRevisionModel.BuyerGroupId)}">
              <div class="input-group-append">
                <button type="button" class="btn btn-outline-secondary form-control btn-border" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm1','BuyerGroupId',MPRPageForm1.controls.BuyerGroupId.value,undefined)"></button>
              </div>
              <span *ngIf="MPRForm1Submitted && (MPRPageForm1.controls.BuyerGroupId.value.trim()=='' || !mprRevisionModel.BuyerGroupId)" class="invalid-feedback">Select Buyer of Group.</span>
            </div>
          </div>
          <div *ngIf="form1Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
            <label class="lblEdit">Buyer of Group </label>
            <span class="valueEdit">{{MPRPageForm1.value.BuyerGroupId}}</span>
          </div>
        </div>
        <div class="row" *ngIf="mprRevisionDetails.MPRAssignNames">
          <div *ngIf="form1Edit" class="col-lg-12 col-md-12 col-sm-12 form-inline">
            <label style="font-weight:bold">MPR Assigned To : </label>&nbsp;
            <span>{{mprRevisionDetails.MPRAssignNames}}</span>
          </div>
          </div>
          <div *ngIf="!form1Edit" style="text-align: center;">
            <button type="button" class="btn btn-success" (click)="onMPRForm1Submit('MPRPageForm1','showMaterialForm','form1Edit')" label="Save">Proceed</button>
          </div>
        </div>
      </div>
  </form>
  <br />
  <form *ngIf="showMaterialForm" [formGroup]="MPRPageForm2">
    <!--<form [formGroup]="MPRPageForm2">-->
    <div id="MPRMaterialId" class="my-animation">
      <div class="head-text pl-0">
        <div class="col-md-6 pt-2">Material Details</div>
        <div class="col-md-3 pt-2"></div>
        <div *ngIf="materialFormEdit" class="col-md-3 edit pt-1">
          <button type="button" *ngIf="!showMaterialEditBtn" class="btn btn-outline-secondary form-inline edit-button" pButton icon="fa fa-edit" aria-hidden="true" (click)="onFormEdit('materialFormEdit','MPRMaterialId')"></button>
        </div>
      </div>
      <div class="form-control" style="height:100%;border-radius:0px;">
        <div class="card" style="border:none">
          <div class="card-body" style="overflow:auto !important">
            <!--<p-table [value]="mprRevisionModel.MPRItemInfoes" [style]="{'width':'1230px','overflow':'auto!important'}">
              <ng-template pTemplate="caption">
                <div style="display:inline">
                  <span style="float:left">Item Details : </span>
                  <span style="padding-left:100px" class="form-inline">
                    <button type="button" [disabled]="materialFormEdit" pButton icon="fa fa-plus" (click)="showItemDialogToAdd('displayItemDialog')"></button> &nbsp;&nbsp;
                    <label>Item List Upload :</label>&nbsp; <input type="file" id="uploadInputFile" [disabled]="materialFormEdit" class="form-control" (change)="uploadExcel($event)" placeholder="Upload Excel" accept=".xlsx,.xls">
                    &nbsp; &nbsp;<label class="mt-2">DownLoad format :</label>&nbsp; <button  class="mt-2" type="button" [disabled]="materialFormEdit" pButton icon="fa fa-download" (click)="downLoadExcelFormat()"></button>
                  </span>
                </div>
              </ng-template>
              <ng-template pTemplate="header">
                <tr class="mprltbldata">
                  <th style="width:50px">S.No</th>
                  <th style="width:250px">Item Code & MPR Item Description</th>
                  <th style="width:100px">Quantity & Unit</th>
                  <th style="width:100px">Sale Order Line Item No</th>
                  <th style="width:100px">Reference Doc No</th>
                  <th style="width:100px">Mfg part No</th>
                  <th style="width:100px">Mfg model No</th>
                  <th style="width:100px">Target Spend</th>
                  <th style="text-align:center;width:100px">Documents</th>
                  <th style="width:100px;text-align:center">PO No</th>
                  <th style="width:50px">Edit</th>
                  <th style="width:50px" *ngIf="!materialFormEdit && RepeatOrder">Repeat Order</th>
                  <th style="width:70px" *ngIf="hideDeleteBtn">Remove</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex">
                <tr>
                  <td class="ptable-cell">
                    {{ri+1}}
                  </td>
                  <td class="ptable-cell">{{rowData.Itemid}} - {{rowData.ItemDescription}}</td>
                  <td class="ptable-cell">{{rowData.Quantity}}  {{BindUnits(rowData.UnitId)}}</td>
                  <td class="ptable-cell">{{rowData.SOLineItemNo}}</td>
                  <td class="ptable-cell">{{rowData.ReferenceDocNo}}</td>
                  <td class="ptable-cell">{{rowData.MfgPartNo}}</td>
                  <td class="ptable-cell">{{rowData.MfgModelNo}}</td>
                  <td class="ptable-cell">{{rowData.TargetSpend}}</td>
                  <td class="ptable-cell">
                    <div *ngFor="let document of mprRevisionModel.MPRDocuments">
                      <i *ngIf="document.ItemDetailsId==rowData.Itemdetailsid && document.DocumentTypeid==1" class="fa fa-paperclip" (click)="viewDocument(document.Path,document.DocumentName)" aria-hidden="true" pTooltip="File Name: {{document.DocumentName}} Updated By: {{document.UploadedBy}} Updated On: {{document.UplaodedDate | date :  constants.dateFormat}}"></i>
                    </div>
                  </td>
                  <td>{{getPOnumbers(rowData)}}</td>
                  <td style="text-align:center">
                    <button [disabled]="materialFormEdit" pButton type="button" icon="fa fa-pencil" class="ui-button-info" (click)="onRowEditInit($event,'MPRPageForm1',rowData)"></button>
                  </td>
                  <td style="text-align:center" *ngIf="!materialFormEdit && RepeatOrder">
                    <input type="checkbox" style="height:15px;width:15px" (click)="selectMprLineItems($event,ri,rowData)">
                  </td>
                  <td style="text-align:center" *ngIf="hideDeleteBtn">
                    <button [disabled]="materialFormEdit" pButton type="button" icon="fa fa-trash" class="ui-button-info" style="margin-left: 1px;" (click)="onMPRInfoDelete(rowData,ri)"></button>
                  </td>
                </tr>
              </ng-template>
            </p-table>-->
            <p-table [value]="mprRevisionModel.MPRItemInfoes" [responsive]="true" [autoLayout]="true" [style]="{'width':'100%','overflow':'auto!important'}">
              <ng-template pTemplate="caption">
                <div style="display:inline">
                  <span style="float:left">Item Details : </span>
                  <span style="padding-left:100px" class="form-inline">
                    <button type="button" [disabled]="materialFormEdit" pButton icon="fa fa-plus" (click)="showItemDialogToAdd('displayItemDialog')"></button> &nbsp;&nbsp;
                    <label>Item List Upload :</label>&nbsp; <input type="file" id="uploadInputFile" [disabled]="materialFormEdit" class="form-control" (change)="uploadExcel($event)" placeholder="Upload Excel" accept=".xlsx,.xls">
                    &nbsp; &nbsp;<label class="mt-2">DownLoad format :</label>&nbsp; <button class="mt-2" type="button" [disabled]="materialFormEdit" pButton icon="fa fa-download" (click)="downLoadExcelFormat()"></button>
                  </span>
                </div>
              </ng-template>
              <ng-template pTemplate="header">
                <tr class="mprltbldata">
                  <th>S.No</th>
                  <th class="ptable-cell">Item Code & MPR Item Description</th>
                  <th style="width:90px">Quantity & Unit</th>
                  <th style="width:110px">Target Spend</th>
                  <th style="text-align:center;width:80px">Documents</th>
                  <th style="width:30px">Edit</th>
                  <th style="width:50px" *ngIf="!materialFormEdit && RepeatOrder">Repeat Order</th>
                  <th style="width:30px" *ngIf="hideDeleteBtn">Remove</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex">
                <tr>
                  <td class="ptable-cell">
                    {{ri+1}}
                  </td>
                  <td class="ptable-cell">
                    {{rowData.Itemid}} - {{rowData.ItemDescription}}
                    <div class="row" style="margin-right:0px;margin-top:10px">
                      <label class="col-lg-6 col-md-6 col-sm-6">SO Line Item No:&nbsp;&nbsp;<span>{{rowData.SOLineItemNo}}</span></label>
                      <label class="col-lg-6 col-md-6 col-sm-6">Reference:&nbsp;&nbsp;<span>{{rowData.ReferenceDocNo}}</span></label>
                    </div>
                    <div class="row" style="margin-right:0px">
                     
                      <label class="col-lg-6 col-md-6 col-sm-6">YGS Project:&nbsp;&nbsp;<span>{{rowData.ProjectDefinition}}</span></label>
                      <label class="col-lg-6 col-md-6 col-sm-6">WBS:&nbsp;&nbsp;<span>{{rowData.WBS}}</span></label>
                    </div>
                    <div class="row" style="margin-right:0px">
                      <label class="col-lg-6 col-md-6 col-sm-6">SystemModel:&nbsp;&nbsp;<span>{{rowData.SystemModel}}</span></label>
                      <label class="col-lg-6 col-md-6 col-sm-6">PO NO:&nbsp;&nbsp;<span>{{getPOnumbers(rowData)}}</span></label>
                    </div>
                    <div class="row" style="margin-right:0px">
                      <label class="col-lg-12 col-md-12 col-sm-12">Mfg part No:&nbsp;&nbsp;<span>{{rowData.MfgPartNo}}</span></label>
                    </div>
                    <div class="row" style="margin-right:2px">
                      <label class="col-lg-12 col-md-12 col-sm-12">Mfg model No:&nbsp;&nbsp;<span>{{rowData.MfgModelNo}}</span></label>
                    </div>
                    <div class="row" *ngIf="rowData.PAItems" style="margin-right:0px">
                      <label class="col-lg-12 col-md-12 col-sm-12">TokochuNo:&nbsp;&nbsp;<span>{{getTokochno(rowData.PAItems)}}</span></label>
                    </div>
                  </td>
                  <td>{{rowData.Quantity}}  {{BindUnits(rowData.UnitId)}}</td>
                  <td>{{rowData.TargetSpend}}</td>
                  <td class="ptable-cell">
                    <div *ngFor="let document of mprRevisionModel.MPRDocuments">
                      <i *ngIf="document.ItemDetailsId==rowData.Itemdetailsid && document.DocumentTypeid==1" class="fa fa-paperclip" (click)="viewDocument(document.Path,document.DocumentName)" aria-hidden="true" pTooltip="File Name: {{document.DocumentName}} Updated By: {{document.UploadedBy}} Updated On: {{document.UplaodedDate | date :  constants.dateFormat}}"></i>
                    </div>
                  </td>
                  <td style="text-align:center">
                    <button [disabled]="materialFormEdit" pButton type="button" icon="fa fa-pencil" class="ui-button-info" (click)="onRowEditInit($event,'MPRPageForm1',rowData)"></button>
                  </td>
                  <td style="text-align:center" *ngIf="!materialFormEdit && RepeatOrder">
                    <input type="checkbox" style="height:15px;width:15px" (click)="selectMprLineItems($event,ri,rowData)">
                  </td>
                  <td style="text-align:center" *ngIf="hideDeleteBtn">
                    <button [disabled]="materialFormEdit" pButton type="button" icon="fa fa-trash" class="ui-button-info" style="margin-left: 1px;" (click)="onMPRInfoDelete(rowData,ri)"></button>
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </div>
        <br /><br />
        <div class="col-sm-4 col-lg-4 col-md-4"></div><div class="col-sm-4 col-lg-4 col-md-4" style="float:right"><button *ngIf="!materialFormEdit && RepeatOrder" class="btn btn-success" (click)="onRevisionCopy()">Repeat Order</button></div>
        <br /><br />
        <div *ngIf="mprRevisionModel.MPRItemInfoes.length > 0">
          <div class="form-group row">
            <div *ngIf="!materialFormEdit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Total Target Spend(INR)</label>
              <input class="form-control" [disabled]="true" readonly formControlName="TargetSpend" type="text" [value]="MPRPageForm2.controls.TargetSpend.value" [ngModel]="calculateTargetSpend()">
            </div>
            <div *ngIf="materialFormEdit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label lblEdit">Total Target Spend(INR) </label>
              <span class="valueEdit">{{calculateTargetSpend()}}</span>
            </div>

            <div *ngIf="!materialFormEdit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Target Spend Remarks</label>
              <textarea class="form-control" type="text" maxlength="500" formControlName="TargetedSpendRemarks" [value]="MPRPageForm2.controls.TargetedSpendRemarks.value" [(ngModel)]="mprRevisionModel.TargetedSpendRemarks" [ngClass]="{ 'is-invalid': MPRForm2Submitted &&  MPRPageForm2.controls.TargetedSpendRemarks.errors }"></textarea>
              <span *ngIf="MPRForm2Submitted && !MPRPageForm2.controls.TargetedSpendRemarks.value" class="invalid-feedback">Enter Target Spend Remarks.</span>
            </div>
            <div *ngIf="materialFormEdit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label lblEdit">Target Spend Remarks </label>
              <span class="valueEdit">{{mprRevisionModel.TargetedSpendRemarks}}</span>
            </div>

            <div *ngIf="!materialFormEdit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Supporting Documents For Target Spent</label>&nbsp; &nbsp;
              <button type="button" [disabled]="mprRevisionModel.MPRItemInfoes.length > 0 ? false:true" pButton icon="fa fa-plus" (click)="openMPR3Dialog('showDocumentUpload')"></button>
            </div>
            <div *ngIf="MPR3Documents.length>0" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label"><b>Supporting Documents For Target Spent :</b></label>
              <div *ngFor="let document of MPR3Documents">
                <i class="fa fa-paperclip" aria-hidden="true" (click)="viewDocument(document.Path,document.DocumentName)" pTooltip="File Name: {{document.DocumentName}} Updated By: {{document.UploadedBy}} Updated On: {{document.UplaodedDate | date :  constants.dateFormat}}"></i>&nbsp;
                <span>{{document.DocumentName}} </span>&nbsp;&nbsp;
                <i *ngIf="deleteDocument" class="fa fa-remove" aria-hidden="true" (click)="removeDoument(document)"></i><br />
              </div>
              <!--<p-table [value]="MPR3Documents" [style]="{height:'200px',overflow:'scroll'}">
                <ng-template pTemplate="caption">
                  Supporting Documents For Target Spent :
                </ng-template>
                <ng-template pTemplate="header">
                  <tr>
                    <th>S.No</th>
                    <th>Document</th>
                    <th *ngIf="hideDeleteBtn" style="text-align:center">Remove</th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex" let-rindex=0>
                  <tr *ngIf="rowData.DocumentTypeid==2">
                    <td>
                      {{ri+1}}
                    </td>
                    <td><i class="fa fa-paperclip" (click)="viewDocument(rowData.Path,rowData.DocumentName)" aria-hidden="true" pTooltip="File Name: {{rowData.DocumentName}} Updated By: {{rowData.UploadedBy}} Updated On: {{rowData.UplaodedDate | date :  constants.dateFormat}}"></i></td>
                    <td style="text-align:center" *ngIf="hideDeleteBtn">
                      <button [disabled]="materialFormEdit" pButton type="button" icon="fa fa-trash" class="ui-button-info" style="margin-left: 1px;" (click)="removeDoument(rowData)"></button>
                    </td>
                  </tr>
                </ng-template>
              </p-table>-->
            </div>
          </div>
        </div>

        <br />
        <div *ngIf="mprRevisionModel.MPRItemInfoes.length > 0 && !materialFormEdit" style="text-align: center;">
          <button type="button" class="btn btn-success" (click)="onMPRMaterialSubmit('MPRMaterialId','showVendorForm','materialFormEdit')" label="Save">Proceed</button>
        </div>
      </div>
    </div>
    <br />
    <div *ngIf="showVendorForm" id="MPRVendorId" class="my-animation">
      <div class="head-text pl-0">
        <div class="col-md-6 pt-2">Vendor Details</div>
        <div class="col-md-3 pt-2"></div>
        <div *ngIf="vendorFormEdit" class="col-md-3 edit pt-1">
          <button type="button" *ngIf="!showVendorEditBtn" class="btn btn-outline-secondary form-control edit-button" pButton icon="fa fa-edit" aria-hidden="true" (click)="onFormEdit('vendorFormEdit','MPRVendorId')"></button>
        </div>
      </div>
      <div class="form-control" style="height:100%;border-radius:0px;">
        <div>
          <div class="form-group row" style="margin-top:10px">
            <div *ngIf="!vendorFormEdit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Type Of Purchase </label>&nbsp;<span style="color:red">*</span>
              <div class="form-inline-list">
                <input type="text" class="form-control forms-input" formControlName="PurchaseTypeId" [value]="MPRPageForm2.controls.PurchaseTypeId.value" [ngClass]="{ 'is-invalid': MPRForm2Submitted &&  MPRPageForm2.controls.PurchaseTypeId.errors }">
                <span class="input-group-append">
                  <button type="button" class="btn btn-outline-secondary form-control btn-border" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm2','PurchaseTypeId',MPRPageForm2.controls.PurchaseTypeId.value,undefined)"></button>
                </span>
                <span *ngIf="MPRForm2Submitted && !MPRPageForm2.controls.PurchaseTypeId.value" class="invalid-feedback">Select Type Of Purchase.</span>
              </div>
            </div>
            <div *ngIf="vendorFormEdit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Type Of Purchase </label>
              <span class="valueEdit">{{MPRPageForm2.controls.PurchaseTypeId.value}}</span>
            </div>


            <div *ngIf="!vendorFormEdit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Type of Preference </label>&nbsp;<span style="color:red">*</span>
              <div class="form-inline-list">
                <input type="text" class="form-control forms-input" formControlName="PreferredVendorTypeId" [value]="MPRPageForm2.controls.PreferredVendorTypeId.value" [ngClass]="{ 'is-invalid': MPRForm2Submitted &&  MPRPageForm2.controls.PreferredVendorTypeId.errors }">
                <span class="input-group-append">
                  <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm2','PreferredVendorTypeId',MPRPageForm2.controls.PreferredVendorTypeId.value,undefined)"></button>
                </span>
                <span *ngIf="MPRForm2Submitted && !MPRPageForm2.controls.PreferredVendorTypeId.value" class="invalid-feedback">Select Type Of Preference.</span>
              </div>
            </div>
            <div *ngIf="vendorFormEdit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Type of Preference </label>
              <span class="valueEdit">{{MPRPageForm2.controls.PreferredVendorTypeId.value}}</span>
            </div>

            <div *ngIf="!vendorFormEdit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Justificatiion for selecting single vendor</label>&nbsp;<span style="color:red">*</span>
              <input type="text" [attr.disabled]="justificationDisply == true ? true : null" maxlength="500" [(ngModel)]="mprRevisionModel.JustificationForSinglePreferredVendor" id="JustificationForSinglePreferredVendor" formControlName="JustificationForSinglePreferredVendor" class="form-control" [ngClass]="{ 'is-invalid': MPRForm2Submitted  && justificationDisply==false&& MPRPageForm2.controls.JustificationForSinglePreferredVendor.errors }">
              <span *ngIf="MPRForm2Submitted && justificationDisply==false && !MPRPageForm2.controls.JustificationForSinglePreferredVendor.value" class="invalid-feedback">Single vendor required.</span>
            </div>
            <div *ngIf="vendorFormEdit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Justificatiion for selecting single vendor</label>
              <span class="valueEdit">{{mprRevisionModel.JustificationForSinglePreferredVendor}}</span>
            </div>
          </div>
        </div>
        <p-table [value]="mprRevisionModel.MPRVendorDetails" [style]="{'width':'100%','overflow':'auto!important'}">
          <ng-template pTemplate="caption">
            <span style="float:left">Vendor Details :</span>
            <div class="col-lg-8 col-md-8 col-sm-8">
              <img style="height: 20px; width: 20px;" src="assets/rfqgenerate.png">&nbsp;RFQ Generated&nbsp;
              <img style="height: 20px; width: 20px;" src="assets/rfqresponded.png">&nbsp;RFQ Responded&nbsp;
              <img style="height: 20px; width: 20px;" src="assets/rfqraised.png">&nbsp;Query Raised&nbsp;
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr class="mprltbldata">
              <th>S.No</th>
              <th>Name Of Vendor</th>
              <th style="text-align:center;width:200px" *ngIf="RfqGeneratedList.length>0">RFQ No</th>
              <th style="text-align:center;">RFQ Status</th>
              <th style="text-align:center"><button type="button" [disabled]="vendorFormEdit" pButton icon="fa fa-plus" (click)="openMPR3Dialog('showVendorDialog')"></button></th>
              <th *ngIf="hideDeleteBtn">Remove</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex" let-rindex=0>
            <tr>
              <td class="ptable-cell">
                {{ri+1}}
              </td>
              <td class="ptable-cell">
                <div *ngIf="rowData.VendorMaster">{{rowData.VendorMaster.VendorName}}<span *ngIf="rowData.VendorMaster.VendorCode">-</span>{{rowData.VendorMaster.VendorCode}}</div>
              </td>
              <td class="ptable-cell" style="text-align:left" *ngIf="RfqGeneratedList.length>0 && rowData.VendorMaster">
                <div *ngIf="viewRfq">
                  <label *ngFor="let Item of RfqFilteredGeneratedList">
                    <a [routerLink]="['/SCM/VendorQuoteView',getRfqData(rowData.VendorMaster.Vendorid,'revisionId',Item.rfqRevisionId)]" target="_blank" routerLinkActive="active">{{getRfqData(rowData.VendorMaster.Vendorid,'rfqLink',Item.rfqRevisionId)}}</a>
                    <i *ngIf="editRfq && getEditData(rowData.VendorMaster.Vendorid,'rfqLink',Item.rfqRevisionId)" class="fa fa-edit" style="margin-left: 5px;color: red!important;cursor: pointer;" (click)="editRFQData(Item.rfqRevisionId)"></i><br />
                  </label>
                </div>
              </td>
              <td class="ptable-cell">
                <span *ngIf="viewRfq">
                  <label *ngFor="let Item of RfqFilteredGeneratedList">
                    <img *ngIf="getRfqStatus(rowData.VendorMaster.Vendorid,Item.rfqRevisionId,7)==7" pTooltip="{{Item.RFQNo}} - {{Item.RevisionNo}}" style="height: 20px; width: 20px;margin-left:4px" src="assets/rfqgenerate.png">
                    <img *ngIf="getRfqStatus(rowData.VendorMaster.Vendorid,Item.rfqRevisionId,8)==8" pTooltip="{{Item.RFQNo}} - {{Item.RevisionNo}}" style="height: 20px; width: 20px;margin-left:4px" src="assets/rfqresponded.png">
                    <img *ngIf="checkrfqRaised(Item.rfqRevisionId)" pTooltip="{{Item.RFQNo}} - {{Item.RevisionNo}}" style="height: 20px; width: 20px;margin-left:4px" src="assets/rfqraised.png"><br />
                  </label>
                </span>
              </td>
              <td class="ptable-cell" style="text-align:center" *ngIf="!editing">
                <button [disabled]="vendorFormEdit" pButton type="button" icon="fa fa-edit" class="ui-button-info" style="margin-left: 1px;" (click)="EditVendor('showVendorDialog',rowData)"></button>
              </td>
              <td class="ptable-cell" *ngIf="hideDeleteBtn">
                <button [disabled]="vendorFormEdit" pButton type="button" icon="fa fa-trash" class="ui-button-info" style="margin-left: 1px;" (click)="removeVendor(rowData)"></button>
              </td>
            </tr>

          </ng-template>
        </p-table><br />
        <div *ngIf="!vendorFormEdit" style="text-align: center;">
          <button type="button" class="btn btn-success" (click)="onMPRVendorSubmit('MPRVendorId','showOtherDetailsForm','vendorFormEdit')" label="Save">Proceed</button>
        </div>
      </div>
    </div>
  </form>
  <br />
  <div id="padetails" *ngIf="PAdetailsList.length>0">
    <p-table [value]="PAdetailsList" [style]="{'width':'100%','overflow':'auto!important'}">
      <ng-template pTemplate="caption">
        PA Details :
      </ng-template>
      <ng-template pTemplate="header">
        <tr class="mprltbldata">
          <th style="text-align:center">S.No</th>
          <th style="text-align:center">PA Id</th>
          <th style="text-align:center">Name Of Vendor</th>
          <th style="text-align:center">RFQ No</th>
          <th style="text-align:center">PA Status && Date</th>
          <th style="text-align:center">PO Status && Date</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex" let-rindex=0>
        <tr>
          <td class="ptable-cell">
            {{ri+1}}
          </td>
          <!--<td class="ptable-cell" style="text-align:center">{{rowData.PAID}}</td>-->
          <td class="ptable-cell" style="text-align:center"><span *ngIf="!showPALink">{{rowData.PAID}}</span><a *ngIf="showPALink" [routerLink]="['/SCM/mprpa',rowData.PAID]" target="_blank" routerLinkActive="active">{{rowData.PAID}}</a></td>
          <td class="ptable-cell" style="text-align:left">{{rowData.VendorName}}</td>
          <td class="ptable-cell" style="text-align:center">{{rowData.RFQNo}}</td>
          <td class="ptable-cell" style="text-align:left">{{rowData.PAStatus}} - {{rowData.PAStatusUpdate | date:constants.dateFormat}} </td>
          <td class="ptable-cell" style="text-align:left">{{rowData.POStatus}} - {{rowData.POStatusUpdate | date:constants.dateFormat}} </td>
        </tr>
      </ng-template>
    </p-table>
  </div><br />
  <form *ngIf="showOtherDetailsForm" [formGroup]="MPRPageForm3" id="MPRPageForm3">
    <!--<form [formGroup]="MPRPageForm3">-->
    <div class="my-animation">
      <div class="head-text pl-0">
        <div class="col-md-6 pt-2">Other Deatils</div>
        <div class="col-md-3 pt-2"></div>
        <div *ngIf="form3Edit" class="col-md-3 edit pt-1">
          <button type="button" *ngIf="!shoForm3EditBtn" class="btn btn-outline-secondary form-inline edit-button" pButton icon="fa fa-edit" aria-hidden="true" (click)="onFormEdit('form3Edit','MPRPageForm3')"></button>
        </div>
      </div>
      <div class="form-control" style="height:100%;border-radius:0px;">

        <b>Delivery Details:</b>
        <div class="border" style="margin-top:10px !important">
          <br />
          <div class="form-group row" style="margin:0px">
            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Delivery Required By</label>&nbsp;<span style="color:red">*</span>

              <input type="date" #myDate [value]="mprRevisionModel.DeliveryRequiredBy | date:'yyyy-MM-dd'" (input)="mprRevisionModel.DeliveryRequiredBy=parseDate($event.target.value)" formControlName="DeliveryRequiredBy" class="form-control" [ngClass]="{ 'is-invalid': MPRForm3Submitted &&  MPRPageForm3.controls.DeliveryRequiredBy.errors }" />
              <!--<input type="date" [(ngModel)="mprRevisionModel.DeliveryRequiredBy" data-date-format="constants.dateFormat" formControlName="DeliveryRequiredBy" class="form-control" [ngClass]="{ 'is-invalid': MPRForm3Submitted &&  MPRPageForm3.controls.DeliveryRequiredBy.errors }">-->
              <span *ngIf="MPRForm3Submitted && MPRPageForm3.controls.DeliveryRequiredBy.errors" class="invalid-feedback">delivery requiredBy required.</span>
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Delivery Required By</label>
              <span class="valueEdit">{{mprRevisionModel.DeliveryRequiredBy | date :  constants.dateFormat}}</span>
            </div>

            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Dispatch Location</label>&nbsp;<span style="color:red">*</span>
              <div class="form-inline-list">
                <input type="text" class="form-control forms-input" (keypress)="onsrchTxtChange('DispatchLocation','mprRevisionModel')" [value]="MPRPageForm3.controls.DispatchLocation.value" formControlName="DispatchLocation" [ngClass]="{ 'is-invalid': MPRForm3Submitted &&  (MPRPageForm3.controls.DispatchLocation.value.trim()=='' || !mprRevisionModel.DispatchLocation) }">
                <span class="input-group-append">
                  <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm3','DispatchLocation',MPRPageForm3.controls.DispatchLocation.value,undefined)"></button>
                </span>
                <span *ngIf="MPRForm3Submitted && (MPRPageForm3.controls.DispatchLocation.value.trim()=='' || !mprRevisionModel.DispatchLocation)" class="invalid-feedback">Select Dispatch Location.</span>
              </div>
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Dispatch Location </label>
              <span class="valueEdit">{{MPRPageForm3.controls.DispatchLocation.value}}</span>
            </div>

            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Specify Dispatch Location</label>&nbsp;<span style="color:red">*</span>
              <input type="text" [(ngModel)]="DispatchLocation" maxlength="100"  [attr.disabled]="specifyDispatchDisply == true ? true : null" id="specifyDispatchLocation" formControlName="specifyDispatchLocation" class="form-control" [ngClass]="{ 'is-invalid': MPRForm3Submitted && specifyDispatchDisply==false &&  MPRPageForm3.controls.specifyDispatchLocation.errors }">
              <span *ngIf="MPRForm3Submitted && specifyDispatchDisply==false && !MPRPageForm3.controls.specifyDispatchLocation.value" class="invalid-feedback">Specify dispatch location required.</span>
            </div>

            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Specify Dispatch Location </label>
              <span class="valueEdit">{{DispatchLocation}}</span>
            </div>
            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Scope Shall Include</label>&nbsp;<span style="color:red">*</span>
              <div class="form-inline-list">
                <input type="text" class="form-control forms-input" formControlName="ScopeId" (keypress)="onsrchTxtChange('ScopeId','mprRevisionModel')" [value]="MPRPageForm3.controls.ScopeId.value" [ngClass]="{ 'is-invalid': MPRForm3Submitted && (MPRPageForm3.controls.ScopeId.value.trim()=='' ||  !mprRevisionModel.ScopeId) }">
                <span class="input-group-append">
                  <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm3','ScopeId',MPRPageForm3.controls.ScopeId.value,undefined)"></button>
                </span>
                <span *ngIf="MPRForm3Submitted && (MPRPageForm3.controls.ScopeId.value.trim()=='' ||  !mprRevisionModel.ScopeId)" class="invalid-feedback">Select Scope Shall Include.</span>
              </div>
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Scope Shall Include</label>
              <span class="valueEdit">{{MPRPageForm3.controls.ScopeId.value}}</span>
            </div>
            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Storage Locations</label>
              <select id="manWeeks" class="form-control forms-input" formControlName="StorageLocation" [(ngModel)]="mprRevisionModel.StorageLocation">
                <option value="">Choose Storage location</option>
                <option *ngFor="let option of locations" [value]="option.Sloc">{{option.storagelocations}}</option>
              </select>
              <!--<span><input type="button" class="btn btn-primary" (click)="loadlocations(MPRPageForm1.controls.DepartmentId.value)" value="Load" /></span>-->
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Storage Locations</label>
              <span class="valueEdit">{{mprRevisionModel.StorageLocation}}</span>
            </div>
            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label for="ClientName" class="form-label">Ship To Party</label>&nbsp;
              <div  class="form-inline-list  ml-2 ">
                <input type="text" class="form-control forms-input" formControlName="shiptoparty" (keypress)="onsrchTxtChange('shiptoparty','mprRevisionModel')" [value]="MPRPageForm3.controls.shiptoparty.value">
                <div class="input-group-append">
                  <button type="button" class="btn btn-outline-secondary form-control btn-border" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm3','shiptoparty',MPRPageForm3.controls.shiptoparty.value,undefined)"></button>
                </div>
                <span *ngIf="MPRForm3Submitted && (MPRPageForm3.controls.shiptoparty.value.trim()=='' || !mprRevisionModel.shiptopartyname)" class="invalid-feedback">Select Client Name.</span>
              </div>
              <!--<div *ngIf="MPRPageForm3.controls.DispatchLocation.value == 'EC / Factory'|| MPRPageForm3.controls.DispatchLocation.value == 'EC - Products' && MPRPageForm3.controls.DispatchLocation.value == 'Phase-II'" class="form-inline-list  ml-2 ">
                <input type="text" class="form-control forms-input" formControlName="shiptoparty" [value]="MPRPageForm3.controls.shiptoparty.value">
                <div class="input-group-append">
                  <button type="button" class="btn btn-outline-secondary form-control btn-border" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm3','shiptoparty',MPRPageForm3.controls.shiptoparty.value,undefined)"></button>
                </div>
                <span *ngIf="MPRForm3Submitted && (MPRPageForm3.controls.shiptoparty.value.trim()=='' || !mprRevisionModel.shiptopartyname)" class="invalid-feedback">Select Client Name.</span>
              </div>-->
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Ship to party</label>
              <span class="valueEdit">{{mprRevisionModel.shiptopartyname}}</span>
            </div>
          </div>
        </div><br />

        <b>Training Details:</b>
        <div class="border" style="margin-top:10px !important">
          <br />
          <div class="form-group row form-control" style="margin-left:7px;height:100%;width:98%">
            <!--<div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
             <label class="form-label">Scope Shall Include</label>
                <div class="form-inline-list">
                  <input type="text" class="form-control forms-input" formControlName="ScopeId" [value]="MPRPageForm3.controls.ScopeId.value" [ngClass]="{ 'is-invalid': MPRForm3Submitted &&  MPRPageForm3.controls.ScopeId.errors }" (keyup)="bindSearchListData($event,'MPRPageForm3','PreferredVendorTypeId',MPRPageForm3.controls.ScopeId.value,undefined)">
                  <span class="input-group-append">
                    <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm3','ScopeId','',undefined)"></button>
                  </span>
                  <span *ngIf="MPRForm3Submitted && !MPRPageForm3.controls.ScopeId.value" class="invalid-feedback">Select Scope Shall Include.</span>
                </div>
              </div>
              <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
                <label class="lblEdit">Scope Shall Include</label>
                <span class="valueEdit">{{MPRPageForm3.controls.ScopeId.value}}</span>
              </div>-->

            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Training Required</label>
              <div class="form-inline ml-4">
                <p-inputSwitch [(ngModel)]="mprRevisionModel.TrainingRequired" (click)="trainingRequiredChange()" formControlName="TrainingRequired" [ngClass]="{ 'is-invalid': MPRForm3Submitted &&  MPRPageForm3.controls.TrainingRequired.errors }"></p-inputSwitch>
                &nbsp;&nbsp;<span class="form-label">{{mprRevisionModel.TrainingRequired==true?'Yes':'No'}}</span>
                <span *ngIf="MPRForm3Submitted && MPRPageForm3.controls.TrainingRequired.errors" class="invalid-feedback">Select training required.</span>
              </div>
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Training Required</label>
              <span class="valueEdit">{{mprRevisionModel.TrainingRequired==true?'Yes':'No'}}</span>
            </div>

            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Man Weeks</label>&nbsp;<span style="color:red">*</span>
              <div class="form-inline">
                <select id="manWeeks" class="form-control forms-input" [(ngModel)]="mprRevisionModel.TrainingManWeeks" [attr.disabled]="MPRPageForm3.controls.TrainingRequired.value==true?null:true" formControlName="TrainingManWeeks" [ngClass]="{ 'is-invalid': MPRForm3Submitted && MPRPageForm3.controls.TrainingRequired.value==true &&  MPRPageForm3.controls.TrainingManWeeks.errors }">
                  <option value=0>Select</option>
                  <option value=1>1</option>
                  <option value=2>2</option>
                  <option value=3>3</option>
                  <option value=4>4</option>
                  <option value=5>5</option>
                  <option value=6>6</option>
                </select>
                <span *ngIf="MPRForm3Submitted && MPRPageForm3.controls.TrainingRequired.value==true && !MPRPageForm3.controls.TrainingManWeeks.value" class="invalid-feedback">Select man weeks.</span>
              </div>
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Man Weeks </label>
              <span class="valueEdit">{{mprRevisionModel.TrainingManWeeks}}</span>
            </div>
            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Training Remarks</label>
              <input type="text" maxlength="200" [(ngModel)]="mprRevisionModel.TrainingRemarks" [attr.disabled]="MPRPageForm3.controls.TrainingRequired.value==true?null:true" id="TrainingRemarks" formControlName="TrainingRemarks" class="form-control" [ngClass]="{ 'is-invalid': MPRForm3Submitted && MPRPageForm3.controls.TrainingRequired.value=='true' &&  MPRPageForm3.controls.TrainingRemarks.errors }">
              <!--<span *ngIf="MPRForm3Submitted && MPRPageForm3.controls.TrainingRequired.value==true  && MPRPageForm3.controls.TrainingRemarks.errors" class="invalid-feedback">remarks Required.</span>-->
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Remarks </label>
              <span class="valueEdit">{{mprRevisionModel.TrainingRemarks}}</span>
            </div>
          </div>
          <div class="form-group row" style="margin:0px">


            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Documentation</label>&nbsp;<span *ngIf="mprRevisionModel.BoolDocumentationApplicable" style="color:red">*</span>
              <div class="form-inline ml-4">
                <p-inputSwitch id="documentation" [(ngModel)]="mprRevisionModel.BoolDocumentationApplicable" formControlName="BoolDocumentationApplicable" [ngClass]="{ 'is-invalid': MPRForm3Submitted &&  MPRPageForm3.controls.BoolDocumentationApplicable.errors }"></p-inputSwitch>
                &nbsp;<span class="form-label">{{mprRevisionModel.BoolDocumentationApplicable==true?'Yes':'No'}}</span>
                <span *ngIf="MPRForm3Submitted && !MPRPageForm3.controls.BoolDocumentationApplicable.value" class="invalid-feedback">Select Doumentation.</span>
              </div>
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Documentation </label>
              <span class="valueEdit">{{mprRevisionModel.BoolDocumentationApplicable==true?'Yes':'No'}}</span>
            </div>
          </div>
        </div>
        <br />
        <p-table *ngIf="mprRevisionModel.BoolDocumentationApplicable==true" [value]="mprRevisionModel.MPRDocumentations" [responsive]="true">
          <ng-template pTemplate="caption">
            Documentation :
          </ng-template>
          <ng-template pTemplate="header">
            <tr class="mprltbldata">
              <th>Description</th>
              <th>For Approval</th>
              <th>For Final</th>
              <th style="text-align:center"><button [disabled]="form3Edit" type="button" pButton icon="fa fa-plus" (click)="openMPR3Dialog('showDocumentationDialog')"></button></th>

            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex" let-rindex=0>
            <tr *ngIf="rowData.MPRDocumentationDescription">
              <td>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input pInputText type="text" [(ngModel)]="rowData.MPRDocumentationDescription.DocumentationDescription" required>
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{rowData.MPRDocumentationDescription.DocumentationDescription}}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input pInputText type="text" [(ngModel)]="rowData.NoOfSetsApproval" required>
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{rowData.NoOfSetsApproval}}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input pInputText type="text" [(ngModel)]="rowData.NoOfSetsFinal" required>
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{rowData.NoOfSetsFinal}}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td style="text-align:center" *ngIf="!editing">
                <button [disabled]="form3Edit" pButton type="button" icon="fa fa-trash" class="ui-button-info" style="margin-left: 1px;" (click)="removeDoumentation(rowData)"></button>
              </td>
            </tr>
          </ng-template>
        </p-table><br />
        <b>Gurantee Details:</b>
        <div class="border" style="margin-top:10px !important">
          <br />
          <div class="form-group row" style="margin:0px">
            <!--<div *ngIf="!form3Edit" class="col-lg-2 col-md-2 col-sm-2 form-group">
              <label>Gurantee Period Required</label>
            </div>-->
            <div *ngIf="form3Edit" class="col-lg-6 col-md-6 col-sm-6 form-group" style="margin:0px">
              <label class="lblEdit">Gurantee Period Required</label>
              <span>{{mprRevisionModel.GuaranteePeriod}}</span>
            </div>

            <!--<div *ngIf="form3Edit" class="col-lg-6 col-md-6 col-sm-6 form-group">
              <label class="lblEdit">No. of sets of Quality Assurance Plan Required</label>
              <span *ngIf="form3Edit" class="valueEdit">{{mprRevisionModel.NoOfSetsOfQAP}}</span>
            </div>-->
            <div *ngIf="!form3Edit" class="col-lg-12 col-md-12 col-sm-12 form-inline">
              <label>Gurantee Period Required</label>&nbsp;&nbsp;&nbsp;&nbsp;

              <select class="form-control" formControlName="supplyMonths" (change)="monthChanges();">
                <option *ngFor="let number of numbers" [ngValue]="number">{{number}}</option>
              </select>&nbsp;&nbsp;
              <label class="form-label">months after supply   or</label>&nbsp;&nbsp;
              <select class="form-control" formControlName="commissionMonths" (change)="monthChanges();">
                <option *ngFor="let number of numbers" [ngValue]="number">{{number}}</option>
              </select>&nbsp;&nbsp;
              <label class="form-label">months after commissioning whichever is earlier</label>&nbsp;&nbsp;
              Or &nbsp;
              <p-checkbox formControlName="GuaranteePeriod" value="Not Applicable" (click)="guranteeChanges()" [(ngModel)]="mprRevisionModel.GuaranteePeriod"></p-checkbox>&nbsp;&nbsp; Not Applicable
            </div>
          </div>
          <br />
          <!--<div class="form-group row" style="margin:0px">
            <div *ngIf="!form3Edit" class="col-lg-6 col-md-6 col-sm-6 form-group">
              Or &nbsp;&nbsp;
              <p-checkbox formControlName="GuaranteePeriod" label="Not Applicable" value="Not Applicable" (click)="guranteeChanges()" [(ngModel)]="mprRevisionModel.GuaranteePeriod"></p-checkbox>
            </div>
          </div><br />-->
          <!--<div class="form-group row" style="margin:0px">
            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">No. of sets of Quality Assurance Plan Required </label>
              <div class="form-inline">
                <select class="form-control forms-input" [ngClass]="{ 'is-invalid': MPRForm3Submitted && !MPRPageForm3.controls.NoOfSetsOfQAP.value}" formControlName="NoOfSetsOfQAP" [(ngModel)]="mprRevisionModel.NoOfSetsOfQAP" style="width:100px">
                  <option *ngFor="let number of numbers" [ngValue]="number">{{number}}</option>
                </select>
                <span *ngIf="MPRForm3Submitted && !MPRPageForm3.controls.NoOfSetsOfQAP.value" class="invalid-feedback">Select Quality Assurance Plan Required.</span>
              </div>
            </div>
          </div>-->
        </div>
        <br />
        <b>Inspection Details:</b>

        <div class="border" style="margin-top:10px !important">
          <br />
          <div class="form-group row" style="margin:0px">
            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Inspection Required</label>
              <div class="form-inline ml-4">
                <p-inputSwitch formControlName="InspectionRequired" [(ngModel)]="mprRevisionModel.InspectionRequired" [ngClass]="{ 'is-invalid': MPRForm3Submitted &&  MPRPageForm3.controls.InspectionRequired.errors }"></p-inputSwitch>
                &nbsp;&nbsp;<span class="form-label" style="right: 20px;">{{mprRevisionModel.InspectionRequired==true?'Yes':'No'}}</span>
              </div>
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Inspection Required </label>
              <span class="valueEdit">{{mprRevisionModel.InspectionRequired==true?'Yes':'No'}}</span>
            </div>
            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Inspection Remarks</label>&nbsp;<span style="color:red">*</span>
              <input type="text" maxlength="200" [(ngModel)]="mprRevisionModel.InspectionRemarks" [attr.disabled]="MPRPageForm3.controls.InspectionRequired.value==true?null:true" id="InspectionRemarks" formControlName="InspectionRemarks" class="form-control" [ngClass]="{ 'is-invalid': MPRForm3Submitted && MPRPageForm3.controls.InspectionRequired.value=='true' &&  MPRPageForm3.controls.InspectionRemarks.errors }">
              <div *ngIf="MPRForm3Submitted && MPRPageForm3.controls.InspectionRequired.value==true  && MPRPageForm3.controls.InspectionRemarks.errors" class="invalid-feedback">remarks Required.</div>
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Remarks </label>
              <span class="valueEdit">{{mprRevisionModel.InspectionRemarks}}</span>
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit"> No. of sets of Test Certificates </label>
              <span class="valueEdit">{{mprRevisionModel.NoOfSetsOfTestCertificates}}</span>
            </div>
          </div>

          <div *ngIf="!form3Edit">
            <div *ngIf="mprRevisionModel.InspectionRequired==true" class="form-group row" style="margin:0px">
              <p-radioButton name="groupname" class="col-lg-8 col-md-8 col-sm-8 form-group" formControlName="InspectionComments" (click)="inspectionChanges($event)" [(ngModel)]="mprRevisionModel.InspectionComments" label="Inspection Procedure and Test Certificates shall be submitted by the Vendor" value="Inspection Procedure and Test Certificates shall be submitted by the Vendor"></p-radioButton>
            </div><br />

            <div *ngIf="mprRevisionModel.InspectionRequired==false" class="form-group row" style="margin:0px">
              <p-radioButton class="col-lg-8 col-md-8 col-sm-8 form-group" formControlName="InspectionComments" (click)="inspectionChanges($event)" [(ngModel)]="mprRevisionModel.InspectionComments" label="Test certificates to be submitted in order to release the despatch clearance" value="Test certificates to be submitted in order to release the despatch clearance."></p-radioButton>
            </div>

            <div class="form-group row" style="margin:0px">
              <div class="col-lg-4 col-md-4 col-sm-4 form-group">
                <label class="form-label"> No. of sets of Test Certificates</label>&nbsp;<span style="color:red">*</span>
                <div class="form-inline">
                  <select class="form-control forms-input" [ngClass]="{ 'is-invalid': MPRForm3Submitted && !MPRPageForm3.controls.NoOfSetsOfTestCertificates.value}" formControlName="NoOfSetsOfTestCertificates" [(ngModel)]="mprRevisionModel.NoOfSetsOfTestCertificates">
                    <option *ngFor="let number of numbers" [ngValue]="number">{{number}}</option>
                  </select>
                  <span *ngIf="MPRForm3Submitted && !MPRPageForm3.controls.NoOfSetsOfTestCertificates.value" class="invalid-feedback">Select No. of sets of Test Certificates.</span>
                </div>
              </div>
            </div>
            <div *ngIf="mprRevisionModel.InspectionRequired==true" class="form-group row" style="margin:0px">
              <p-radioButton class="col-lg-8 col-md-8 col-sm-8 form-group" name="groupname" formControlName="InspectionComments" (click)="inspectionChanges($event)" [(ngModel)]="mprRevisionModel.InspectionComments" label="Inspection & Test shall be carried out in accordance with the mutually agreed procedure" value="Inspection & Test shall be carried out in accordance with the mutually agreed procedure"></p-radioButton>
            </div>
          </div>
        </div>
        <div class="border" style="margin-top:10px !important">
          <br />
          <div class="form-group row" style="margin:0px">
            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Source Of Procurement</label>&nbsp;<span style="color:red">*</span>
              <div class="form-inline-list">
                <input type="text" class="form-control forms-input" formControlName="ProcurementSourceId" (keypress)="onsrchTxtChange('ProcurementSourceId','mprRevisionModel')" [value]="MPRPageForm3.controls.ProcurementSourceId.value" [ngClass]="{ 'is-invalid': MPRForm3Submitted && (MPRPageForm3.controls.ProcurementSourceId.value.trim()=='' || !mprRevisionModel.ProcurementSourceId)}">
                <span class="input-group-append">
                  <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm3','ProcurementSourceId',MPRPageForm3.controls.ProcurementSourceId.value,undefined)"></button>
                </span>
                <span *ngIf="MPRForm3Submitted && (MPRPageForm3.controls.ProcurementSourceId.value.trim()=='' || !mprRevisionModel.ProcurementSourceId)" class="invalid-feedback">Select Source Of Procurement.</span>
              </div>
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Source Of Procurement</label>
              <span class="valueEdit">{{MPRPageForm3.value.ProcurementSourceId}}</span>
            </div>

            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Customs Duty For Imports</label>&nbsp;<span style="color:red">*</span>
              <div class="form-inline-list">
                <input type="text" class="form-control forms-input" formControlName="CustomsDutyId" (keypress)="onsrchTxtChange('CustomsDutyId','mprRevisionModel')" [value]="MPRPageForm3.controls.CustomsDutyId.value" [ngClass]="{ 'is-invalid': MPRForm3Submitted && (MPRPageForm3.controls.CustomsDutyId.value.trim()=='' || !mprRevisionModel.CustomsDutyId)}">
                <span class="input-group-append">
                  <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm3','CustomsDutyId',MPRPageForm3.controls.CustomsDutyId.value,undefined)"></button>
                </span>
                <span *ngIf="MPRForm3Submitted && (MPRPageForm3.controls.CustomsDutyId.value.trim()=='' || !mprRevisionModel.CustomsDutyId)" class="invalid-feedback">Select Customs Duty For Imports.</span>
              </div>
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Customs Duty For Imports </label>
              <span class="valueEdit">{{MPRPageForm3.value.CustomsDutyId}}</span>
            </div>

            <!--<div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Project Duty Applicable</label>
              <div class="form-inline-list">
                <input type="text" class="form-control forms-input" formControlName="ProjectDutyApplicableId" [value]="MPRPageForm3.controls.ProjectDutyApplicableId.value" [ngClass]="{ 'is-invalid': MPRForm3Submitted && !MPRPageForm3.controls.ProjectDutyApplicableId.value}" (keyup)="bindSearchListData($event,'MPRPageForm3',MPRPageForm3.controls.ProjectDutyApplicableId.value,'',undefined)">
                <span class="input-group-append">
                  <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm3','ProjectDutyApplicableId','',undefined)"></button>
                </span>
                <span *ngIf="MPRForm3Submitted && !MPRPageForm3.controls.ProjectDutyApplicableId.value" class="invalid-feedback">Select Project Duty Applicable.</span>
              </div>
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Project Duty Applicable </label>
              <span class="valueEdit">{{MPRPageForm3.value.ProjectDutyApplicableId}}</span>
            </div>-->
          </div>
          <div class="form-group row" style="margin:0px">
            <div class="col-lg-5 col-md-5 col-sm-5">
              <label for="InchargeName" class="form-label">Incharge Names </label>&nbsp;&nbsp;
              <button type="button" [disabled]="form3Edit" pButton icon="fa fa-plus" (click)="showInchargeDialogToAdd('displayInchargeDialog')"></button>
            </div>
            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Remarks</label>
              <div class="form-inline">
                <textarea [(ngModel)]="mprRevisionModel.Remarks" maxlength="500" id="Remarks" formControlName="Remarks" class="form-control" [ngClass]="{ 'is-invalid': MPRForm3Submitted  &&  MPRPageForm3.controls.Remarks.errors }"></textarea>
                <span *ngIf="MPRForm3Submitted && MPRPageForm3.controls.Remarks.errors" class="invalid-feedback">Remarks Required.</span>
              </div>
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Remarks</label>
              <span class="valueEdit">{{mprRevisionModel.Remarks}}</span>
            </div>
          </div>
          <!--<div class="form-group" style="margin:0px">
            <div class="col-lg-4 col-md-4 col-sm-4 form-group">
              <i class="pi pi-envelope icons" ></i><span>Can Receive Mail Notification</span>
            </div>
            </div>-->
          <div class="form-group row" style="margin:0px">
            <div class="col-lg-8 col-md-8 col-sm-8">
              <p-table *ngIf="mprRevisionModel.MPRIncharges.length>0" [value]="mprRevisionModel.MPRIncharges">
                <ng-template pTemplate="header">
                  <tr class="mprltbldata">
                    <th class="ptable-cell">Emp Name</th>
                    <th class="ptable-cell">Can Clear Technically</th>
                    <th class="ptable-cell">Can Clear Commercially</th>
                    <th class="ptable-cell">Can Receive Mail Notification</th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex" let-rindex=0>
                  <tr>
                    <td class="ptable-cell">{{getEmployeename(rowData.Incharge)}}</td>
                    <td>
                      <i *ngIf="rowData.CanClearTechnically==true" class="pi pi-check check-color"></i>
                      <i *ngIf="rowData.CanClearTechnically==false" class="pi pi-times times-color"></i>
                    </td>
                    <td>
                      <i *ngIf="rowData.CanClearCommercially==true" class="pi pi-check check-color"></i>
                      <i *ngIf="rowData.CanClearCommercially==false" class="pi pi-times times-color"></i>
                    </td>
                    <td>
                      <i *ngIf="rowData.CanReceiveMailNotification==true" class="pi pi-check check-color"></i>
                      <i *ngIf="rowData.CanReceiveMailNotification==false" class="pi pi-times times-color"></i>
                    </td>
                  </tr>
                </ng-template>
              </p-table>
            </div>


          </div><br />
          <div class="row" style="margin:0px">
            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="form-label">Check By </label>&nbsp;<span style="color:red">*</span>
              <div class="form-inline-list">
                <input type="text" class="form-control forms-input" formControlName="CheckedBy" (keypress)="onsrchTxtChange('CheckedBy','mprRevisionModel')" [value]="MPRPageForm3.controls.CheckedBy.value" [ngClass]="{ 'is-invalid': MPRForm3Submitted && (MPRPageForm3.controls.CheckedBy.value.trim()=='' || !mprRevisionModel.CheckedBy)}">
                <div class="input-group-append">
                  <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm3','CheckedBy',MPRPageForm3.controls.CheckedBy.value,undefined)"></button>
                </div>
                <span *ngIf="MPRForm3Submitted && (MPRPageForm3.controls.CheckedBy.value.trim()=='' || !mprRevisionModel.CheckedBy)" class="invalid-feedback">Select Check By.</span>
              </div>
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Check By </label>
              <span class="valueEdit">{{MPRPageForm3.value.CheckedBy}}</span>
            </div>

            <div *ngIf="!form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label for="ApprovedBy" class="form-label">Approve By</label>&nbsp;<span style="color:red">*</span>
              <div class="form-inline-list">
                <input type="text" class="form-control forms-input" formControlName="ApprovedBy" (keypress)="onsrchTxtChange('ApprovedBy','mprRevisionModel')" [value]="MPRPageForm3.controls.ApprovedBy.value" [ngClass]="{ 'is-invalid': MPRForm3Submitted && (MPRPageForm3.controls.ApprovedBy.value.trim()=='' || !mprRevisionModel.ApprovedBy)}">
                <span class="input-group-append">
                  <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRPageForm3','ApprovedBy',MPRPageForm3.controls.ApprovedBy.value,undefined)"></button>
                </span>
                <span *ngIf="MPRForm3Submitted && (MPRPageForm3.controls.ApprovedBy.value.trim()=='' || !mprRevisionModel.ApprovedBy)" class="invalid-feedback">Select Approve By.</span>
              </div>
            </div>
            <div *ngIf="form3Edit" class="col-lg-4 col-md-4 col-sm-4 form-group">
              <label class="lblEdit">Approve By </label>
              <span class="valueEdit">{{MPRPageForm3.value.ApprovedBy}}</span>
            </div>
          </div>
        </div><br />
        <div *ngIf="!form3Edit" style="text-align: center;">
          <button type="button" class="btn btn-success" (click)="onMPRForm3Submit('MPRPageForm3','form3Edit')" label="Save">Proceed</button>
        </div>
      </div>

    </div>

  </form>
  <br />

  <form *ngIf="showCommunicationForm" [formGroup]="MPRCommunicationForm">
    <div id="MPRCommunicationId" class="my-animation">
      <div class="head-text pl-0">
        <div class="col-md-6 pt-2">Communication Details</div>
        <div class="col-md-3 pt-2"></div>
        <div *ngIf="communicationFormEdit" class="col-md-3 edit pt-1">
          <button type="button" *ngIf="!showCommEditBtn" class="btn btn-outline-secondary form-inline edit-button" pButton icon="fa fa-edit" aria-hidden="true" (click)="onFormEdit('showCommunicationForm','MPRCommunicationId')"></button>
        </div>
      </div>
      <div class=" form-control" style="height:100%;border-radius:0px;">
        <div class="row" style="margin-top:0px">
          <div class="col-lg-4 col-md-4 col-sm-4">
            <label for="InchargeName" class="form-label">Add Communication </label>&nbsp;&nbsp;
            <button type="button" [disabled]="communicationFormEdit" pButton icon="fa fa-plus" (click)="showCommunicationDialogToAdd('displayCommunicationDialog')"></button>
          </div>
          <div class="col-lg-8 col-md-8 col-sm-8">
            <i class="fa fa-clock-o"></i>&nbsp;Reminder&nbsp;
            <i style="color:green" class="fa fa-clock-o"></i>&nbsp;Reminder Mail Sent&nbsp;
            <i style="color:green" class="fa fa-envelope"></i>&nbsp;Mail Sent
          </div>
        </div><br />
        <div class="form-group row" style="margin:0px">

          <div class="col-lg-12 col-md-12 col-sm-12">

            <p-table *ngIf="mprRevisionModel.MPRCommunications.length>0" [value]="mprRevisionModel.MPRCommunications">
              <ng-template pTemplate="header">
                <tr class="mprltbldata">
                  <th>Communication By</th>
                  <th>Date</th>
                  <th>Remarks</th>
                  <th>Communication To</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex" let-rindex=0>
                <tr *ngIf="rowData.Employee">
                  <td>{{rowData.Employee.Name}}</td>
                  <td>{{rowData.RemarksDate | date :  constants.dateFormat}}</td>
                  <td>
                    {{rowData.Remarks}}
                  </td>
                  <td>
                    <span *ngFor="let trackData of rowData.MPRReminderTrackings">
                      <span *ngIf="trackData.Employee" [style.color]="trackData.MailAddressType=='CC' ? '#28a745' : 'black' ">{{trackData.Employee.Name}}</span>&nbsp;
                      <i *ngIf="rowData.SendEmail==1" style="color:green" class="fa fa-envelope"></i>&nbsp;<i *ngIf="rowData.SetReminder==1" class="fa fa-clock-o"></i>&nbsp;
                    </span>
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </div><br />
      </div>
    </div>
  </form><br />

  <div *ngIf="showCommunicationForm" id="MPRStatusId" class="my-animation">
    <div class="head-text pl-0">
      <div class="col-md-6 pt-2">MPR Approvals</div>
      <div class="col-md-3 pt-2"></div>
    </div>
    <div class="form-control" style="height:100%;border-radius:0px;">
      <div class="row " style="margin-top:0px">
        <div class="col-lg-6 col-md-6 col-sm-6">
          <table class="table table-bordered">
            <thead style="background-color:#007bff36">
              <tr>
                <th colspan="2">
                  <span style="float:left">Checker: </span>&nbsp;&nbsp;<button *ngIf="mprRevisionModel.CheckStatus!='Approved'" type="button" class="btn btn-secondary" style="cursor:pointer;height:20px;font-size:10px;width: 70px;border-radius: 2px;" pButton (click)="onstatusUpdate('',mprRevisionDetails)"><i class="fa fa-bell-o" aria-hidden="true"></i> Reminder</button>
                </th>
              </tr>
            </thead>
            <tr>
              <td style="width:20%">Employee Name</td>
              <td style="width:20%">{{mprRevisionDetails.CheckedName}}</td>
            </tr>
            <tr>
              <td>Status</td>
              <td>{{mprRevisionModel.CheckStatus}}</td>
            </tr>
            <tr>
              <td>Date</td>
              <td>{{mprRevisionModel.CheckedOn }}</td>
            </tr>
            <tr>
              <td style="width:20%">Remarks</td>
              <td style="width:20%">{{mprRevisionModel.CheckerRemarks}}</td>
            </tr>
          </table>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6">
          <table class="table table-bordered">
            <thead style="background-color:#007bff36">
              <tr>
                <th colspan="2">
                  <span style="float:left">Approver: </span>&nbsp;&nbsp;<button *ngIf="mprRevisionModel.ApprovalStatus!='Approved'" type="button" class="btn btn-secondary" style="cursor:pointer;height:20px;font-size:10px;width: 70px;border-radius: 2px;" pButton (click)="onstatusUpdate('',mprRevisionDetails)"><i class="fa fa-bell-o" aria-hidden="true"></i> Reminder</button>
                </th>
              </tr>
            </thead>
            <tr>
              <td style="width:20%">Employee Name</td>
              <td style="width:20%">{{mprRevisionDetails.ApproverName}}</td>
            </tr>
            <tr>
              <td>Status</td>
              <td>{{mprRevisionModel.ApprovalStatus}}</td>
            </tr>
            <tr>
              <td>Date</td>
              <td>{{mprRevisionModel.ApprovedOn }}</td>
            </tr>
            <tr>
              <td style="width:20%">Remarks</td>
              <td style="width:20%">{{mprRevisionModel.ApproverRemarks}}</td>
            </tr>
          </table>
        </div>
      </div><br />
      <div class="row " style="margin-top:0px">
        <div *ngIf="mprRevisionDetails.SecondApprover && mprRevisionDetails.SecondApprover!='-'" class="col-lg-6 col-md-6 col-sm-6">
          <table class="table table-bordered">
            <thead style="background-color:#007bff36">
              <tr>
                <th colspan="2">
                  <span style="float:left">Second Approver: </span>&nbsp;&nbsp;<button *ngIf="mprRevisionModel.SecondApproversStatus!='Approved'" type="button" class="btn btn-secondary" style="cursor:pointer;height:20px;font-size:10px;width: 70px;border-radius: 2px;" pButton (click)="onstatusUpdate('',mprRevisionDetails)"><i class="fa fa-bell-o" aria-hidden="true"></i> Reminder</button>
                </th>
              </tr>
            </thead>
            <tr>
              <td style="width:20%">Employee Name</td>
              <td style="width:20%">{{mprRevisionDetails.SecondApproverName}}</td>
            </tr>
            <tr>
              <td>Status</td>
              <td>{{mprRevisionModel.SecondApproversStatus}}</td>
            </tr>
            <tr>
              <td>Date</td>
              <td>{{mprRevisionModel.SecondApprovedOn }}</td>
            </tr>
            <tr>
              <td style="width:20%">Remarks</td>
              <td style="width:20%">{{mprRevisionModel.SecondApproverRemarks}}</td>
            </tr>
          </table>
        </div>
        <div *ngIf="mprRevisionDetails.ThirdApprover && mprRevisionDetails.ThirdApprover!='-'" class="col-lg-6 col-md-6 col-sm-6">
          <table class="table table-bordered">
            <thead style="background-color:#007bff36">
              <tr>
                <th colspan="2">
                  <span style="float:left">Third Approver: </span>&nbsp;&nbsp;<button *ngIf="mprRevisionModel.ThirdApproverStatus!='Approved'" type="button" class="btn btn-secondary" style="cursor:pointer;height:20px;font-size:10px;width: 70px;border-radius: 2px;" pButton (click)="onstatusUpdate('',mprRevisionDetails)"><i class="fa fa-bell-o" aria-hidden="true"></i> Reminder</button>
                </th>
              </tr>
            </thead>
            <tr>
              <td style="width:20%">Employee Name</td>
              <td style="width:20%">{{mprRevisionDetails.ThirdApproverName}}</td>
            </tr>
            <tr>
              <td>Status</td>
              <td>{{mprRevisionModel.ThirdApproverStatus}}</td>
            </tr>
            <tr>
              <td>Date</td>
              <td>{{mprRevisionModel.ThirdApproverStatusChangedOn }}</td>
            </tr>
            <tr>
              <td style="width:20%">Remarks</td>
              <td style="width:20%">{{mprRevisionModel.ThirdApproverRemarks}}</td>
            </tr>
          </table>
        </div>
      </div>
    </div>
    <br />
    <div class="head-text pl-0" *ngIf="mprRevisionDetails.OCheckedBy && mprRevisionDetails.OCheckedBy!='-'">
      <div class="col-md-6 pt-2">Issuing PO Approvals</div>
      <div class="col-md-3 pt-2"></div>
    </div>
    <div class="form-control" style="height:100%;border-radius:0px;" *ngIf="mprRevisionDetails.OCheckedBy && mprRevisionDetails.OCheckedBy!='-'">
      <div class="row " style="margin-top:0px">
        <div class="col-lg-6 col-md-6 col-sm-6">
          <table class="table table-bordered">
            <thead style="background-color:#007bff36">
              <tr>
                <th colspan="2">
                  <span style="float:left">Checker: </span>
                </th>
              </tr>
            </thead>
            <tr>
              <td style="width:20%">Employee Name</td>
              <td style="width:20%">{{mprRevisionDetails.OCheckedName}}</td>
            </tr>
            <tr>
              <td>Status</td>
              <td>{{mprRevisionModel.OCheckStatus}}</td>
            </tr>
            <tr>
              <td>Date</td>
              <td>{{mprRevisionModel.OCheckedOn }}</td>
            </tr>
            <tr>
              <td style="width:20%">Remarks</td>
              <td style="width:20%">{{mprRevisionModel.OCheckerRemarks}}</td>
            </tr>
          </table>
        </div>
        <div *ngIf="mprRevisionDetails.OApprovedBy && mprRevisionDetails.OApprovedBy!='-'" class="col-lg-6 col-md-6 col-sm-6">
          <table class="table table-bordered">
            <thead style="background-color:#007bff36">
              <tr>
                <th colspan="2">
                  <span style="float:left">Approver: </span>
                </th>
              </tr>
            </thead>
            <tr>
              <td style="width:20%">Employee Name</td>
              <td style="width:20%">{{mprRevisionDetails.OApproverName}}</td>
            </tr>
            <tr>
              <td>Status</td>
              <td>{{mprRevisionModel.OApprovalStatus}}</td>
            </tr>
            <tr>
              <td>Date</td>
              <td>{{mprRevisionModel.OApprovedOn }}</td>
            </tr>
            <tr>
              <td style="width:20%">Remarks</td>
              <td style="width:20%">{{mprRevisionModel.OApproverRemarks}}</td>
            </tr>
          </table>
        </div>
      </div><br />
      <div class="row " style="margin-top:0px">
        <div *ngIf="mprRevisionDetails.OSecondApprover && mprRevisionDetails.OSecondApprover!='-'" class="col-lg-6 col-md-6 col-sm-6">
          <table class="table table-bordered">
            <thead style="background-color:#007bff36">
              <tr>
                <th colspan="2">
                  <span style="float:left">Second Approver: </span>
                </th>
              </tr>
            </thead>
            <tr>
              <td style="width:20%">Employee Name</td>
              <td style="width:20%">{{mprRevisionDetails.OSecondApproverName}}</td>
            </tr>
            <tr>
              <td>Status</td>
              <td>{{mprRevisionModel.OSecondApproversStatus}}</td>
            </tr>
            <tr>
              <td>Date</td>
              <td>{{mprRevisionModel.OSecondApprovedOn}}</td>
            </tr>
            <tr>
              <td style="width:20%">Remarks</td>
              <td style="width:20%">{{mprRevisionModel.OSecondApproverRemarks}}</td>
            </tr>
          </table>
        </div>
        <div *ngIf="mprRevisionDetails.OThirdApprover && mprRevisionDetails.OThirdApprover!='-'" class="col-lg-6 col-md-6 col-sm-6">
          <table class="table table-bordered">
            <thead style="background-color:#007bff36">
              <tr>
                <th colspan="2">
                  <span style="float:left">Third Approver: </span>
                </th>
              </tr>
            </thead>
            <tr>
              <td style="width:20%">Employee Name</td>
              <td style="width:20%">{{mprRevisionDetails.OThirdApproverName}}</td>
            </tr>
            <tr>
              <td>Status</td>
              <td>{{mprRevisionModel.OThirdApproverStatus}}</td>
            </tr>
            <tr>
              <td>Date</td>
              <td>{{mprRevisionModel.OThirdApproverStatusChangedOn}}</td>
            </tr>
            <tr>
              <td style="width:20%">Remarks</td>
              <td style="width:20%">{{mprRevisionModel.OThirdApproverRemarks}}</td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
  <br />
  <div *ngIf="showCommunicationForm && AllMPRStatusTrackDetails">
    <div class="head-text pl-0">
      <div class="col-md-6 pt-2">Status History</div>
      <div class="col-md-3 pt-2"></div>
    </div>
    <div class="form-control" style="height:100%;border-radius:0px;">
      <p-table [value]="AllMPRStatusTrackDetails">
        <ng-template pTemplate="header">
          <tr class="mprltbldata">
            <th>Employee Name</th>
            <th>Status</th>
            <th>Status Updated On</th>
            <th>Remarks</th>

          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex">
          <tr>
            <td>{{rowData.Name}}</td>
            <td>{{rowData.Status}}</td>
            <td>{{rowData.UpdatedDate  | date :  constants.dateFormatWithTime}}</td>
            <td>{{rowData.Remarks}}</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
  <div *ngIf="form1Edit" class="icon-bar">
    <a id="mprPage1" (click)="scrollToView('MPRPageForm1','mprPage1')" pTooltip="MPR Title"><i class="fa fa-home"></i></a>
    <a id="mprPage2" (click)="scrollToView('MPRMaterialId','mprPage2')" pTooltip="MPR Material"><i class="fa fa-info"></i></a>
    <a id="mprPage2" (click)="scrollToView('MPRVendorId','mprPage2')" pTooltip="MPR Vendors"><i class="fa fa-users"></i></a>
    <a id="padetails" (click)="scrollToView('padetails','padetails')" pTooltip="PA Details"><i class="fa fa-first-order"></i></a>
    <a id="mprPage3" (click)="scrollToView('MPRPageForm3','mprPage3')" pTooltip="MPR Other Info"><i class="fa fa-info-circle"></i></a>
    <a id="mprPage4" (click)="scrollToView('MPRCommunicationId','mprPage4')" pTooltip="MPR Communication"><i class="fa fa-envelope"></i></a>
    <a id="mprPage5" (click)="scrollToView('MPRStatusId','mprPage5')" pTooltip="MPR Status"><i class="fa fa-globe"></i></a>
    <a *ngIf="showRfqGen" id="mprPage5" [routerLink]="['/SCM/GenerateRFQ',mprRevisionModel.RevisionId]" routerLinkActive="active" pTooltip="Generate RFQ"><i class="fa fa-plus-square"></i></a>
    <a *ngIf="showCompareRfq" id="mprPage6" [routerLink]="['/SCM/RFQComparision',mprRevisionModel.RevisionId]" routerLinkActive="active" pTooltip="Compare RFQ"><i class="fa fa-list-alt"></i></a>
    <a *ngIf="showraisePo" (click)="showPORaiseDialog()" pTooltip="Request for issuing PO"><i class="fa fa-first-order"></i></a>
    <a *ngIf="showManualStatus" (click)="showManualStatusDialog()" pTooltip="Add manual status"><i class="fa fa-user"></i></a>
    <a *ngIf="showBuyerGrp" (click)="enableBuyerGrp()" pTooltip="Change Buyer Group"><i class="fa fa-shopping-cart"></i></a>
    <a *ngIf="showgenPA" [routerLink]="['/SCM/PADetails',mprRevisionModel.RevisionId]" routerLinkActive="active" pTooltip="Generate PA"><i class="fa fa-money"></i></a>
  </div>

  <div *ngIf="displayFooter" class="footer">
    <div class="row form-inline pt-2">
      <div class="col-lg-3 col-md-3 col-sm-3 form-inline" *ngIf="showAcknowledge">
        <label class="form-label">Employee</label>
        <div class="form-inline-list  ml-2 ">
          <input [disabled]="mprStatusUpdate.BuyerGroupName!=''" type="text" class="form-control forms-input" [(ngModel)]="mprStatusUpdate.EmployeeName">
          <div class="input-group-append">
            <button [disabled]="mprStatusUpdate.BuyerGroupName!=''" type="button" class="btn btn-outline-secondary form-control btn-border" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'','AssignEmployee',mprStatusUpdate.EmployeeName,undefined)"></button>
          </div>
        </div>

      </div>
      <div class="col-lg-3 col-md-3 col-sm-3 form-inline" *ngIf="showAcknowledge">
        <label for="BuyerGroupId" class="form-label">Buyer of Group</label>
        <div class="form-inline-list  ml-2 ">
          <input [disabled]="mprStatusUpdate.EmployeeName!=''" type="text" class="form-control forms-input" [(ngModel)]="mprStatusUpdate.BuyerGroupName">
          <div class="input-group-append">
            <button [disabled]="mprStatusUpdate.EmployeeName!=''" type="button" class="btn btn-outline-secondary form-control btn-border" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'','BuyerGroupId',mprStatusUpdate.BuyerGroupName,undefined)"></button>
          </div>
        </div>
      </div>

      <div class="col-lg-3 col-md-3 col-sm-3 form-inline" *ngIf="showAcknowledge">
        <button type="button" class="btn btn-success" [disabled]="mprStatusUpdate.BuyerGroupName=='' && this.mprStatusUpdate.MPRAssignments.length<=0" (click)="onstatusUpdate('Acknowledge','')" label="Save">{{statusAckTxt}}</button>
      </div>
      <div class="col-lg-1 col-md-1 col-sm-1 form-inline">
        <button type="button" class="btn btn-success" (click)="disableFooter()">Close</button>
      </div>
      <div *ngIf="showStatusDetails" class="col-lg-2 col-md-2 col-sm-2 form-inline">
        <span *ngIf="targetspendError" style="font-size:10px;color:white;font-weight: bold;">Target Spend is zero</span>
      </div>

      <div *ngIf="showStatusDetails" class="col-lg-3 col-md-3 col-sm-3 form-inline ">
        &nbsp;&nbsp;<label class="form-label">Status:</label>&nbsp;<select class="form-control dropdown" (change)="statusChange()" [(ngModel)]="mprStatusUpdate.status">
          <option value="Select">Select</option>
          <option *ngFor="let List of statusList" [ngValue]="List.StatusName">{{List.StatusName}}</option>
        </select>&nbsp;
      </div>
      <div *ngIf="showStatusDetails" class="col-lg-3 col-md-3 col-sm-3 form-inline ">
        <label class="form-label">Remarks:</label>&nbsp;
        <textarea type="text" maxlength="500" [(ngModel)]="mprStatusUpdate.Remarks" class="form-control"></textarea>
      </div>
      <div *ngIf="showStatusDetails" class="col-lg-3 col-md-3 col-sm-3 form-inline">
        <button type="button" [disabled]="disableStatusSubmit" class="btn btn-success" (click)="onstatusUpdate('','')" label="Save">Submit</button>&nbsp;<span *ngIf="targetspendError && mprStatusUpdate.status=='Approved' &&  this.mprStatusUpdate.typeOfuser =='Approver'" style="font-size:10px;color:white">Enter target spend to approve</span>
      </div>
    </div>
    <div class="row form-inline pt-2">
      <div *ngFor="let assignment of mprStatusUpdate.MPRAssignments">
        <label class="form-control">
          <span *ngIf="assignment.EmployeeName">{{assignment.EmployeeName}}</span>&nbsp;&nbsp;
          <i class="fa fa-remove" aria-hidden="true" (click)="removeAssignment(assignment)"></i>
        </label>&nbsp;
      </div>
    </div>

  </div>

  <p-dialog [(visible)]="showFileViewer" [style]="{width: '800px', height: '600px'}" [contentStyle]="{'overflow':'visible'}">
    <iframe style="width:780px;height:550px" [src]="doc"></iframe>
    <!--<ngx-doc-viewer [url]="doc" viewer="google" style="width:100%;height:50vh;"></ngx-doc-viewer>-->
    <!--<p-footer>
      <div class="ui-dialog-buttonpane ui-helper-clearfix">
        <button type="button" pButton icon="fa fa-close" (click)="dialogCancel('showFileViewer')" label="Cancel"></button>
      </div>
    </p-footer>-->
  </p-dialog>
  <p-dialog #dialog header="List View :" [(visible)]="showList" (onShow)="onSearhListDialogShow()" [contentStyle]="{'overflow':'visible'}">
    <div *ngIf="searchItems.length == 0" style="color:red">No Items</div>
    <div class="ui-g ui-fluid">
      <p-listbox [options]="searchItems" [(ngModel)]="selectedItem" optionLabel="name" (click)="onSelectedOptionsChange(selectedItem,null)"></p-listbox>
    </div>
    <p-footer>
      <div class="ui-dialog-buttonpane ui-helper-clearfix">
        <button type="button" pButton icon="fa fa-close" (click)="dialogCancel('showList')" label="Cancel"></button>
      </div>
    </p-footer>

  </p-dialog>
  <p-dialog header="Item Details :" [(visible)]="displayItemDialog" [responsive]="true" showEffect="fade" [modal]="true" [contentStyle]="{'max-height':'500px'}" [style]="{width: '700px'}">
    <div class="ui-g ui-fluid">
      <form [formGroup]="MPRItemDetailsForm">
        <div class="ui-g-12">
          <label class="form-label">Items</label>&nbsp;<span style="color:red">*</span>&nbsp;&nbsp;<span style="font-size:10px;color:#d60028">Pls type material name starting 3 or 4 letters for better search , incase search results delays more than 20 sec , then required item is not in the search list. Incase item is new pls type new in search area and click the search button then select the “Item not in the list” and proceed with MPR item description.</span>
          <div class="form-inline-list">
            <input type="text" formControlName="ItemId" (keypress)="onsrchTxtChange('ItemId','itemDetails')" [value]="MPRItemDetailsForm.controls.ItemId.value" class="form-control forms-input" [ngClass]="{ 'is-invalid': MPRItemDetailsSubmitted &&  (MPRItemDetailsForm.controls.ItemId.value.trim()=='' || !itemDetails.Itemid )}">
            <span class="input-group-append">
              <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRItemDetailsForm','ItemId',MPRItemDetailsForm.controls.ItemId.value,undefined)"></button>
            </span>
            <span *ngIf="MPRItemDetailsSubmitted && (MPRItemDetailsForm.controls.ItemId.value.trim()=='' || !itemDetails.Itemid )" class="invalid-feedback">select item.</span>
          </div>
        </div>
        <div class="ui-g-12 form-group">
          <label class="form-label">MPR Item Description</label>&nbsp;<span style="color:red">*</span>
          <textarea formControlName="ItemDescription" maxlength="200" [(ngModel)]="itemDetails.ItemDescription" class="form-control" [ngClass]="{ 'is-invalid': MPRItemDetailsSubmitted &&  MPRItemDetailsSubmitted && !MPRItemDetailsForm.controls.ItemDescription.value}"></textarea>
          <span *ngIf="MPRItemDetailsSubmitted && MPRItemDetailsForm.controls.ItemDescription.errors" class="invalid-feedback">Item Description Required.</span>
        </div>

        <div class="ui-g-12">
          <div class="ui-g-6 form-group">
            <label class="form-label">Quantity</label>&nbsp;<span style="color:red">*</span>
            <input formControlName="Quantity" type="number" [(ngModel)]="itemDetails.Quantity" class="form-control" [ngClass]="{ 'is-invalid': MPRItemDetailsSubmitted &&  MPRItemDetailsSubmitted && !MPRItemDetailsForm.controls.Quantity.value}" />
            <span *ngIf="MPRItemDetailsSubmitted && MPRItemDetailsForm.controls.Quantity.errors" class="invalid-feedback">Quanity Required.</span>
          </div>
          <div class="ui-g-6 form-group">
            <label class="form-label">Units</label>&nbsp;<span style="color:red">*</span>
            <div class="form-inline-list">
              <input type="text" formControlName="UnitId" (keypress)="onsrchTxtChange('UnitId','itemDetails')" [value]="MPRItemDetailsForm.controls.UnitId.value" class="form-control forms-input" [ngClass]="{ 'is-invalid': MPRItemDetailsSubmitted &&  MPRItemDetailsSubmitted && (MPRItemDetailsForm.controls.UnitId.value.trim()=='' || !itemDetails.UnitId)}">
              <span class="input-group-append">
                <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRItemDetailsForm','UnitId',MPRItemDetailsForm.controls.UnitId.value,undefined)"></button>
              </span>
              <span *ngIf="MPRItemDetailsSubmitted && (MPRItemDetailsForm.controls.UnitId.value.trim()=='' || !itemDetails.UnitId)" class="invalid-feedback">Select Units.</span>
            </div>
            <!--<select class="form-control dropdown" name="comptype" [(ngModel)]="itemDetails.UnitId" formControlName="UnitId" [ngClass]="{ 'is-invalid': MPRItemDetailsSubmitted &&  MPRItemDetailsSubmitted && !MPRItemDetailsForm.controls.UnitId.value}">
        <option value="select" selected>Select</option>
        <option value="1">1</option>
        <option value="2">2</option>
      </select>-->

          </div>
        </div>
        <div class="ui-g-12">
          <div class="ui-g-6 form-group">
            <label class="form-label">YGS ProjectID</label>
            <input type="text" formControlName="projectdefinition" [(ngModel)]="itemDetails.ProjectDefinition" class="form-control" />
          </div>
          <div class="ui-g-6 form-group">
            <label class="form-label">WBS</label>
            <input type="text" formControlName="wbs" [(ngModel)]="itemDetails.WBS" class="form-control" />
          </div>
        </div>
        <div class="ui-g-12">
          <div class="ui-g-6 form-group">
            <label class="form-label">Sale Order Line Item No</label>
            <input type="text" formControlName="SOLineItemNo" maxlength="20" [(ngModel)]="itemDetails.SOLineItemNo" class="form-control" />
          </div>
          <div class="ui-g-6 form-group">
            <label class="form-label">Reference If Any</label>
            <input type="text" formControlName="ReferenceDocNo" maxlength="100" [(ngModel)]="itemDetails.ReferenceDocNo" class="form-control" />
          </div>
        </div>
        <div class="ui-g-12">
          <div class="ui-g-6 form-group">
            <label class="form-label">Mfg. Part Number</label>
            <input type="text" formControlName="MfgPartNo" maxlength="100" [(ngModel)]="itemDetails.MfgPartNo" class="form-control" />
          </div>
          <div class="ui-g-6 form-group">
            <label class="form-label">Mfg. Model Number </label>
            <input type="text" formControlName="MfgModelNo" maxlength="100" [(ngModel)]="itemDetails.MfgModelNo" class="form-control" />
          </div>
        </div>
        <div class="ui-g-12">
          <div class="ui-g-6 form-group">
            <label class="form-label">Target Spend</label>
            <input type="number" formControlName="TargetSpend" [(ngModel)]="itemDetails.TargetSpend" class="form-control" />
          </div>
          <div class="ui-g-6 form-group">
            <label class="form-label">File:</label>
            <!--<p-fileUpload mode="basic" name="demo[]"  accept=".pdf,.doc,.docx" maxFileSize="1000000" (onUpload)="onBasicUpload($event)"></p-fileUpload>-->
            <input type="file" class="form-control" id="uploadInputFile" (change)="fileChange($event,'itemDetails')" placeholder="Upload file" accept=".msg,.pdf,.doc,.docx,.xlsx,.xls" multiple>
          </div>
        </div>
        <div class="ui-g-12">
          <div class="ui-g-6 form-group">
            <label class="form-label">System Model</label>
            <input type="number" formControlName="systemmodel" [(ngModel)]="itemDetails.SystemModel" class="form-control" />
          </div>
        </div>
        <div class="ui-g-12">
          <div *ngFor="let document of mprRevisionModel.MPRDocuments">
            <div *ngIf="document.DocumentTypeid==1 && document.ItemDetailsId==itemDetails.Itemdetailsid">
              <i class="fa fa-paperclip" aria-hidden="true" (click)="viewDocument(document.Path,document.DocumentName)"></i>&nbsp;
              <span>{{document.DocumentName}} </span>&nbsp;&nbsp;
              <i *ngIf="deleteDocument" class="fa fa-remove" aria-hidden="true" (click)="removeDoument(document)"></i><br />
            </div>
          </div>
        </div>
      </form>
    </div>
    <p-footer>
      <div class="ui-dialog-buttonpane ui-helper-clearfix">
        <button type="button" pButton icon="fa fa-check" (click)="onItemDeatilsSubmit()" label="Submit"></button>
        <button type="button" pButton icon="fa fa-close" (click)="dialogCancel('displayItemDialog')" label="Cancel"></button>
      </div>
    </p-footer>
  </p-dialog>

  <p-dialog header="Supporting Documents For Target Spent :" [(visible)]="showDocumentUpload" [responsive]="true" showEffect="fade" [modal]="true" [style]="{width: '400px'}">
    <div class="ui-g-1">
      <label class="form-label">File:</label>
    </div>
    <div class="ui-g-6">
      <!--<p-fileUpload mode="basic" name="demo[]"  accept=".pdf,.doc,.docx" maxFileSize="1000000" (onUpload)="onBasicUpload($event)"></p-fileUpload>-->
      <input type="file" class="form-control file" id="uploadInputFile" (change)="fileChange($event,'supportingDocument')" placeholder="Upload file" accept=".msg,.pdf,.doc,.docx,.xlsx,.xls" multiple>
    </div>
    <p-footer>
      <div class="ui-dialog-buttonpane ui-helper-clearfix">
        <button type="button" pButton icon="fa fa-check" (click)="onDocumentSubmit('showDocumentUpload','documentDetails')" label="Submit"></button>
        <button type="button" pButton icon="fa fa-close" (click)="dialogCancel('showDocumentUpload')" label="Cancel"></button>
      </div>
    </p-footer>
  </p-dialog>

  <p-dialog header="Select Vendor :" [(visible)]="showVendorDialog" [responsive]="true" showEffect="fade" [modal]="true" [style]="{width: '600px'}">
    <div class="ui-g-12">
      <div class="ui-g-8 form-group">
        <label class="form-label">Vendor</label>&nbsp;<span style="color:red">*</span>
        <div class="form-inline-list">
          <input type="text" [disabled]="showNewVendor" [(ngModel)]="vendorDetails.VendorName" class="form-control" [ngClass]="{ 'is-invalid':!showNewVendor&&vendorSubmitted && !vendorDetails.VendorName }">
          <span class="input-group-append">
            <button type="button" [disabled]="showNewVendor" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'','venderid',vendorDetails.VendorName,undefined)"></button>
          </span>
          <span *ngIf="!showNewVendor&&vendorSubmitted && !vendorDetails.VendorName" class="invalid-feedback">Select Vendor.</span>
        </div>
      </div>
      <div class="ui-g-4 form-group">
        <label class="form-label">Add New Vendor</label>
        <div class="form-inline ml-4">
          <p-inputSwitch [(ngModel)]="showNewVendor" (click)="showVendorClick()"></p-inputSwitch>
          &nbsp;&nbsp;<span class="form-label">{{showNewVendor==true?'Yes':'No'}}</span>
        </div>
      </div>
    </div>

    <form [formGroup]="newVendor">
      <div class="ui-g-12">
        <div *ngIf="showNewVendor">
          <label class="form-label">Vendor Name</label>
          <input type="text" class="form-control" formControlName="VendorName" [(ngModel)]="newVendorDetails.VendorName" [ngClass]="{ 'is-invalid': vendorSubmitted &&  newVendor.controls.VendorName.errors }" />
          <span *ngIf="vendorSubmitted && newVendor.controls.VendorName.errors" class="newVendorDetails-feedback">vendor Name Required.</span><br />
        </div>
        <label class="form-label">Email Id</label>&nbsp;<span style="color:red">*</span>
        <div class="form-inline-list">
          <input type="email" class="form-control" formControlName="Emailid" [ngClass]="{ 'is-invalid': vendorSubmitted &&  newVendor.controls.Emailid.errors }" [(ngModel)]="newVendorDetails.Emailid" />
          <span class="input-group-append">
            <button type="button" class="btn btn-primary" (click)="addEmail()" label="Add">Add</button>
          </span>
          <span *ngIf="vendorSubmitted && newVendor.controls.Emailid.errors" class="invalid-feedback">Enter valid email.</span>
        </div><br />
        <div *ngFor="let email of vendorEmailList">
          <span style="color:#28a745">{{email}}</span>&nbsp;&nbsp;
          <i class="fa fa-remove" aria-hidden="true" (click)="removeVendorEmail(email)"></i>
        </div>
        <div *ngIf="showNewVendor">
          <label class="form-label">Contact No</label>&nbsp;<span style="color:red">*</span>
          <input type="number" class="form-control" maxlength="10" formControlName="ContactNo" [ngClass]="{ 'is-invalid': vendorSubmitted &&  newVendor.controls.ContactNo.errors }" [(ngModel)]="newVendorDetails.ContactNo" />
          <span *ngIf="vendorSubmitted && newVendor.controls.ContactNo.errors" class="invalid-feedback">Enter valid contact number.</span><br />
        </div>
      </div>
    </form>

    <p-footer>
      <div class="ui-dialog-buttonpane ui-helper-clearfix">
        <button type="button" pButton icon="fa fa-check" (click)="onDocumentSubmit('showVendorDialog','vendorDetails')" label="Submit"></button>
        <button type="button" pButton icon="fa fa-close" (click)="dialogCancel('showVendorDialog')" label="Cancel"></button>
      </div>
    </p-footer>
  </p-dialog>

  <p-dialog header="Select Documentation :" [(visible)]="showDocumentationDialog" [responsive]="true" showEffect="fade" [modal]="true" [style]="{width: '700px'}">
    <div class="ui-g ui-fluid">
      <div class="ui-g-12">
        <div class="ui-g-5 form-group">
          <label class="form-label">Description</label>
          <div class="form-inline-list">
            <input type="text" [(ngModel)]="MPRDocumentations.DocumentationDescription" class="form-control">
            <div class="input-group-append">
              <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'','DocumentationDescriptionId',MPRDocumentations.DocumentationDescription,undefined)"></button>
            </div>
          </div>
        </div>
        <div class="ui-g-4 form-group">
          <label class="form-label">No Of Sets Approval</label>
          <select class="form-control" id="NoOfSetsApproval" [(ngModel)]="MPRDocumentations.NoOfSetsApproval">
            <option *ngFor="let number of numbers" [ngValue]="number">{{number}}</option>
          </select>
        </div>
        <div class="ui-g-3 form-group">
          <label class="form-label">No Of Sets Final</label>
          <select class="form-control" id="NoOfSetsApproval" [(ngModel)]="MPRDocumentations.NoOfSetsFinal">
            <option *ngFor="let number of numbers" [ngValue]="number">{{number}}</option>
          </select>
        </div>
      </div>
      <!--<div class="ui-g-12">
        <div class="ui-g-5 form-group">
          <label class="form-label">No. of sets of Quality Assurance Plan Required </label>
          <div class="form-inline">
            <select class="form-control forms-input" [(ngModel)]="mprRevisionModel.NoOfSetsOfQAP" style="width:100px">
              <option *ngFor="let number of numbers" [ngValue]="number">{{number}}</option>
            </select>

          </div>
        </div>
      </div>-->
    </div>
    <p-footer>
      <div class="ui-dialog-buttonpane ui-helper-clearfix">
        <button type="button" pButton icon="fa fa-check" (click)="onDocumentSubmit('showDocumentationDialog','documentations')" label="Submit"></button>
        <button type="button" pButton icon="fa fa-close" (click)="dialogCancel('showDocumentationDialog')" label="Cancel"></button>
        iv
      </div>
    </p-footer>
  </p-dialog>

  <p-dialog header="Incharge Names :" [(visible)]="displayInchargeDialog" [responsive]="true" showEffect="fade" [modal]="true" [style]="{width: '700px'}">
    <div class="ui-g ui-fluid">
      <form [formGroup]="MPRInchargeForm">
        <div class="ui-g-12">
          <div class="ui-g-6 form-inline">
            <label class="form-label">Incharge Name : </label>&nbsp;
            <input type="text" formControlName="Incharge" [value]="MPRInchargeForm.controls.Incharge.value" class="form-control">
            <div class="input-group-append">
              <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRInchargeForm','Incharge',MPRInchargeForm.controls.Incharge.value,undefined)"></button>
            </div>
          </div>
          <div class="ui-g-5 form-inline">
            <label class="form-label">Can clear Technically : </label>&nbsp;&nbsp;
            <p-checkbox formControlName="CanClearTechnically" [(ngModel)]="mprIncharges.CanClearTechnically" binary="true"></p-checkbox>
          </div>
        </div>
        <div class="ui-g-12">
          <div class="ui-g-6">
            <label for="CompType">Can Clear Commercially : </label>&nbsp;&nbsp;
            <p-checkbox formControlName="CanClearCommercially" [(ngModel)]="mprIncharges.CanClearCommercially" binary="true"></p-checkbox>
          </div>
          <div class="ui-g-5">
            <label for="CompType">Can ReceiveMail Notification:</label>&nbsp;&nbsp;
            <p-checkbox formControlName="CanReceiveMailNotification" [disabled]="true" [(ngModel)]="mprIncharges.CanReceiveMailNotification" binary="true"></p-checkbox>
          </div>
        </div>
      </form>
    </div>
    <p-footer>
      <div class="ui-dialog-buttonpane ui-helper-clearfix">
        <button type="button" pButton icon="fa fa-check" (click)="onInchargeDeatilsSubmit('displayInchargeDialog')" label="Submit"></button>
        <button type="button" pButton icon="fa fa-close" (click)="dialogCancel('displayInchargeDialog')" label="Cancel"></button>
      </div>
    </p-footer>
  </p-dialog>

  <p-dialog header="Communication :" [(visible)]="displayCommunicationDialog" [responsive]="true" showEffect="fade" [modal]="true" [style]="{width: '700px'}">
    <div class="ui-g ui-fluid">
      <form [formGroup]="MPRCommunicationForm" style="width:100%">
        <div class="ui-g-12">
          <div class="ui-g-8">
            <label class="form-label">Remarks</label>&nbsp;<span style="color:red">*</span>&nbsp;
            <textarea type="text" formControlName="Remarks" [(ngModel)]="MPRCommunications.Remarks" [value]="MPRCommunicationForm.controls.Remarks.value" [ngClass]="{ 'is-invalid': MPRCommunicationSubmitted &&  MPRCommunicationForm.controls.Remarks.errors }" class="form-control"></textarea>
            <span *ngIf="MPRCommunicationSubmitted && MPRCommunicationForm.controls.Remarks.errors" class="invalid-feedback">Remarks Required.</span><br />
          </div>
          <div class="ui-g-4 form-inline">
            <label class="form-label">Set Reminder</label>&nbsp;&nbsp;
            <p-checkbox [(ngModel)]="MPRCommunications.SetReminder" formControlName="setReminder" binary="true"></p-checkbox>
          </div>
          <div class="ui-g-4 form-inline">
            <label for="CompType">Send Email </label>&nbsp;&nbsp;
            <p-checkbox [(ngModel)]="MPRCommunications.SendEmail" formControlName="sendemail" binary="true"></p-checkbox>
          </div>
        </div>
        <div *ngIf="MPRCommunications.SetReminder" class="ui-g-12 form-inline">
          <label class="form-label">Reminder Date: </label>&nbsp;<span style="color:red">*</span>&nbsp;
          <input type="date" #myDate [value]="MPRCommunications.ReminderDate | date:'yyyy-MM-dd'" (input)="MPRCommunications.ReminderDate=parseDate($event.target.value)" formControlName="ReminderDate" class="form-control" [ngClass]="{ 'is-invalid': MPRCommunicationSubmitted &&  MPRCommunicationForm.controls.ReminderDate.errors }" />
          <span *ngIf="MPRCommunicationSubmitted && MPRCommunicationForm.controls.ReminderDate.errors" class="invalid-feedback">Reminder Date Required.</span><br />
        </div>
        <div *ngIf="MPRCommunications.SetReminder || MPRCommunications.SendEmail" class="ui-g-12 form-inline">
          <label class="form-label">Add To Emails : </label>&nbsp;<span style="color:red">*</span>&nbsp;
          <input type="text" formControlName="toEmail" [value]="MPRCommunicationForm.controls.toEmail.value" [ngClass]="{ 'is-invalid': MPRCommunicationSubmitted &&  MPRCommunicationForm.controls.toEmail.errors }" class="form-control">
          <div class="input-group-append">
            <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRCommunicationForm','toEmail',MPRCommunicationForm.controls.toEmail.value,undefined)"></button>
          </div> &nbsp;
          <div *ngFor="let comm of MPRCommunications.MPRReminderTrackings">
            <label *ngIf="comm.MailAddressType=='To'" class="form-control">
              <span>{{getComName(comm.MailTo)}}</span>&nbsp;&nbsp;
              <i class="fa fa-remove" aria-hidden="true" (click)="removeCommunication(comm)"></i>
            </label>&nbsp;
          </div>
          <span *ngIf="MPRCommunicationSubmitted && MPRCommunicationForm.controls.toEmail.errors" class="invalid-feedback">To email  Required.</span><br />
        </div>
        <div *ngIf="MPRCommunications.SetReminder || MPRCommunications.SendEmail" class="ui-g-12 form-inline">
          <label class="form-label">Add CC Emails : </label>&nbsp;
          <input type="text" formControlName="ccEmail" [value]="MPRCommunicationForm.controls.ccEmail.value" class="form-control">
          <div class="input-group-append">
            <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRCommunicationForm','ccEmail',MPRCommunicationForm.controls.ccEmail.value,undefined)"></button>
          </div>
          <div *ngFor="let comm of MPRCommunications.MPRReminderTrackings">
            <label *ngIf="comm.MailAddressType=='CC'" class="form-control">
              <span style="color:#28a745">{{getComName(comm.MailTo)}}</span>&nbsp;&nbsp;
              <i class="fa fa-remove" aria-hidden="true" (click)="removeCommunication(comm)"></i>
            </label>&nbsp;
          </div>
          <!--<span *ngIf="MPRCommunicationSubmitted && MPRCommunicationForm.controls.ccEmail.errors" class="invalid-feedback">CC email  Required.</span><br />-->
        </div>
      </form>
    </div>
    <p-footer>
      <div class="ui-dialog-buttonpane ui-helper-clearfix">
        <button type="button" pButton icon="fa fa-check" (click)="onCommnicationSubmit('displayCommunicationDialog')" label="Submit"></button>
        <button type="button" pButton icon="fa fa-close" (click)="dialogCancel('displayCommunicationDialog')" label="Cancel"></button>
      </div>
    </p-footer>
  </p-dialog>


  <p-dialog header="Request For Issuing PO :" [(visible)]="showPOordingDialog" [responsive]="true" showEffect="fade" [modal]="true" [style]="{width: '700px'}">
    <div class="ui-g ui-fluid">
      <form [formGroup]=" POraiseForm">
        <div class="ui-g-12">
          <div class="ui-g-6 form-group">
            <label class="form-label">Check By </label>&nbsp;<span style="color:red">*</span>
            <div class="form-inline-list">
              <input type="text" class="form-control forms-input" formControlName="OCheckedBy" [value]="POraiseForm.controls.OCheckedBy.value">
              <div class="input-group-append">
                <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'POraiseForm','OCheckedBy',POraiseForm.controls.OCheckedBy.value,undefined)"></button>
              </div>
            </div>
          </div>
          <div class="ui-g-6 form-group">
            <label class="form-label">Approval By </label>&nbsp;<span style="color:red">*</span>
            <div class="form-inline-list">
              <input type="text" class="form-control forms-input" formControlName="OApprovedBy" [value]="POraiseForm.controls.OApprovedBy.value">
              <div class="input-group-append">
                <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'POraiseForm','OApprovedBy',POraiseForm.controls.OApprovedBy.value,undefined)"></button>
              </div>
            </div>
          </div>

        </div>
        <div class="ui-g-12">
          <div class="ui-g-6 form-group">
            <label class="form-label">Second Approval By </label>&nbsp;<span style="color:red">*</span>
            <div class="form-inline-list">
              <input type="text" class="form-control forms-input" formControlName="OSecondApprover" [value]="POraiseForm.controls.OSecondApprover.value">
              <div class="input-group-append">
                <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'POraiseForm','OSecondApprover',POraiseForm.controls.OSecondApprover.value,undefined)"></button>
              </div>
            </div>
          </div>
          <div class="ui-g-6 form-group">
            <label class="form-label">Third Approval By </label>&nbsp;<span style="color:red">*</span>
            <div class="form-inline-list">
              <input type="text" class="form-control forms-input" formControlName="OThirdApprover" [value]="POraiseForm.controls.OThirdApprover.value">
              <div class="input-group-append">
                <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'POraiseForm','OThirdApprover',POraiseForm.controls.OThirdApprover.value,undefined)"></button>
              </div>
            </div>
          </div>

        </div>
        <div class="ui-g-12">
          <div class="ui-g-6 form-group">
            <label class="form-label">Remarks </label>&nbsp;<span style="color:red">*</span>
            <div class="form-inline-list">
              <textarea class="form-control forms-input" formControlName="ORemarks" [(ngModel)]="mprRevisionModel.ORemarks" [value]="POraiseForm.controls.ORemarks.value"></textarea>

            </div>
          </div>
        </div>
      </form>
    </div>
    <p-footer>

      <div class="ui-dialog-buttonpane ui-helper-clearfix">
        <button type="button" pButton icon="fa fa-check" (click)="onPoRaiseSubmit('showPOordingDialog')" label="Submit"></button>
      </div>
    </p-footer>
  </p-dialog>

  <p-dialog header="Manual Status:" [(visible)]="showManualStatusgDialog" [responsive]="true" showEffect="fade" [modal]="true" [style]="{width: '700px'}">
    <div class="ui-g ui-fluid">
      <form [formGroup]="MPRStatus">
        <div class="ui-g-12">
          <div class="ui-g-12 form-group">
            <label class="form-label">Status</label>&nbsp;<span style="color:red">*</span>
            <div class="form-inline-list">
              <input type="text" class="form-control forms-input" formControlName="MPRStatus" [value]="MPRStatus.controls.MPRStatus.value">
              <div class="input-group-append">
                <button type="button" class="btn btn-outline-secondary form-control" style="cursor:pointer" pButton icon="fa fa-list" aria-hidden="true" (click)="bindSearchListData($event,'MPRStatus','MPRStatus',MPRStatus.controls.MPRStatus.value,undefined)"></button>
              </div>
            </div>
          </div>
        </div>
        <div class="ui-g-12">
          <div class="ui-g-12 form-group">
            <label class="form-label">Remarks </label>&nbsp;<span style="color:red">*</span>
            <div class="form-inline-list">
              <textarea class="form-control forms-input" formControlName="Remarks" [(ngModel)]="mprStatusUpdate.Remarks"></textarea>
            </div>
          </div>
        </div>
      </form>
    </div>
    <p-footer>
      <div class="ui-dialog-buttonpane ui-helper-clearfix">
        <button type="button" pButton icon="fa fa-check" (click)="onstatusUpdate('MPRManualStatus','')" label="Submit"></button>

      </div>
    </p-footer>
  </p-dialog>
</div>






